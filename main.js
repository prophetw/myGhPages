/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var t={72:(t,e,n)=>{n.r(e),n.d(e,{glMatrix:()=>r,mat2:()=>o,mat2d:()=>a,mat3:()=>i,mat4:()=>s,quat:()=>l,quat2:()=>f,vec2:()=>h,vec3:()=>u,vec4:()=>c});var r={};n.r(r),n.d(r,{ARRAY_TYPE:()=>m,EPSILON:()=>d,RANDOM:()=>p,equals:()=>v,setMatrixArrayType:()=>b,toRadian:()=>x});var o={};n.r(o),n.d(o,{LDU:()=>k,add:()=>L,adjoint:()=>T,clone:()=>g,copy:()=>w,create:()=>M,determinant:()=>z,equals:()=>V,exactEquals:()=>U,frob:()=>D,fromRotation:()=>B,fromScaling:()=>O,fromValues:()=>A,identity:()=>P,invert:()=>E,mul:()=>W,multiply:()=>S,multiplyScalar:()=>q,multiplyScalarAndAdd:()=>N,rotate:()=>I,scale:()=>C,set:()=>F,str:()=>R,sub:()=>G,subtract:()=>j,transpose:()=>_});var a={};n.r(a),n.d(a,{add:()=>ct,clone:()=>X,copy:()=>Y,create:()=>$,determinant:()=>J,equals:()=>mt,exactEquals:()=>dt,frob:()=>ut,fromRotation:()=>ot,fromScaling:()=>at,fromTranslation:()=>it,fromValues:()=>Q,identity:()=>H,invert:()=>K,mul:()=>pt,multiply:()=>tt,multiplyScalar:()=>ft,multiplyScalarAndAdd:()=>ht,rotate:()=>et,scale:()=>nt,set:()=>Z,str:()=>st,sub:()=>bt,subtract:()=>lt,translate:()=>rt});var i={};n.r(i),n.d(i,{add:()=>Vt,adjoint:()=>_t,clone:()=>vt,copy:()=>Mt,create:()=>yt,determinant:()=>Et,equals:()=>$t,exactEquals:()=>Gt,frob:()=>Ut,fromMat2d:()=>Rt,fromMat4:()=>xt,fromQuat:()=>Dt,fromRotation:()=>Bt,fromScaling:()=>Ot,fromTranslation:()=>Ct,fromValues:()=>gt,identity:()=>Pt,invert:()=>Ft,mul:()=>Xt,multiply:()=>Tt,multiplyScalar:()=>Nt,multiplyScalarAndAdd:()=>Wt,normalFromMat4:()=>kt,projection:()=>Lt,rotate:()=>St,scale:()=>It,set:()=>wt,str:()=>jt,sub:()=>Yt,subtract:()=>qt,translate:()=>zt,transpose:()=>At});var s={};n.r(s),n.d(s,{add:()=>Le,adjoint:()=>re,clone:()=>Qt,copy:()=>Zt,create:()=>Ht,determinant:()=>oe,equals:()=>Ne,exactEquals:()=>qe,frob:()=>ke,fromQuat:()=>Fe,fromQuat2:()=>ve,fromRotation:()=>me,fromRotationTranslation:()=>xe,fromRotationTranslationScale:()=>Pe,fromRotationTranslationScaleOrigin:()=>Ae,fromScaling:()=>de,fromTranslation:()=>he,fromValues:()=>Kt,fromXRotation:()=>pe,fromYRotation:()=>be,fromZRotation:()=>ye,frustum:()=>_e,getRotation:()=>we,getScaling:()=>ge,getTranslation:()=>Me,identity:()=>te,invert:()=>ne,lookAt:()=>Oe,mul:()=>We,multiply:()=>ae,multiplyScalar:()=>Ue,multiplyScalarAndAdd:()=>Ve,ortho:()=>Ce,orthoNO:()=>Ie,orthoZO:()=>Be,perspective:()=>Te,perspectiveFromFieldOfView:()=>Se,perspectiveNO:()=>Ee,perspectiveZO:()=>ze,rotate:()=>ue,rotateX:()=>ce,rotateY:()=>le,rotateZ:()=>fe,scale:()=>se,set:()=>Jt,str:()=>De,sub:()=>Ge,subtract:()=>je,targetTo:()=>Re,translate:()=>ie,transpose:()=>ee});var u={};n.r(u),n.d(u,{add:()=>Ke,angle:()=>Tn,bezier:()=>Mn,ceil:()=>nn,clone:()=>Xe,copy:()=>Qe,create:()=>$e,cross:()=>yn,dist:()=>kn,distance:()=>ln,div:()=>Dn,divide:()=>en,dot:()=>bn,equals:()=>Cn,exactEquals:()=>In,floor:()=>rn,forEach:()=>Vn,fromValues:()=>He,hermite:()=>vn,inverse:()=>mn,len:()=>jn,length:()=>Ye,lerp:()=>xn,max:()=>an,min:()=>on,mul:()=>Rn,multiply:()=>tn,negate:()=>dn,normalize:()=>pn,random:()=>gn,rotateX:()=>Fn,rotateY:()=>_n,rotateZ:()=>En,round:()=>sn,scale:()=>un,scaleAndAdd:()=>cn,set:()=>Ze,sqrDist:()=>Ln,sqrLen:()=>Un,squaredDistance:()=>fn,squaredLength:()=>hn,str:()=>Sn,sub:()=>On,subtract:()=>Je,transformMat3:()=>Pn,transformMat4:()=>wn,transformQuat:()=>An,zero:()=>zn});var c={};n.r(c),n.d(c,{add:()=>Xn,ceil:()=>Zn,clone:()=>Nn,copy:()=>Gn,create:()=>qn,cross:()=>hr,dist:()=>Ar,distance:()=>or,div:()=>Pr,divide:()=>Qn,dot:()=>fr,equals:()=>Mr,exactEquals:()=>vr,floor:()=>Kn,forEach:()=>Tr,fromValues:()=>Wn,inverse:()=>cr,len:()=>_r,length:()=>ir,lerp:()=>dr,max:()=>tr,min:()=>Jn,mul:()=>wr,multiply:()=>Hn,negate:()=>ur,normalize:()=>lr,random:()=>mr,round:()=>er,scale:()=>nr,scaleAndAdd:()=>rr,set:()=>$n,sqrDist:()=>Fr,sqrLen:()=>Er,squaredDistance:()=>ar,squaredLength:()=>sr,str:()=>xr,sub:()=>gr,subtract:()=>Yn,transformMat4:()=>pr,transformQuat:()=>br,zero:()=>yr});var l={};n.r(l),n.d(l,{add:()=>ao,calculateW:()=>Lr,clone:()=>eo,conjugate:()=>Gr,copy:()=>ro,create:()=>zr,dot:()=>uo,equals:()=>yo,exactEquals:()=>bo,exp:()=>jr,fromEuler:()=>Xr,fromMat3:()=>$r,fromValues:()=>no,getAngle:()=>Br,getAxisAngle:()=>Cr,identity:()=>Sr,invert:()=>Wr,len:()=>fo,length:()=>lo,lerp:()=>co,ln:()=>Ur,mul:()=>io,multiply:()=>Or,normalize:()=>po,pow:()=>Vr,random:()=>Nr,rotateX:()=>Rr,rotateY:()=>Dr,rotateZ:()=>kr,rotationTo:()=>xo,scale:()=>so,set:()=>oo,setAxes:()=>Mo,setAxisAngle:()=>Ir,slerp:()=>qr,sqlerp:()=>vo,sqrLen:()=>mo,squaredLength:()=>ho,str:()=>Yr});var f={};n.r(f),n.d(f,{add:()=>Wo,clone:()=>wo,conjugate:()=>Zo,copy:()=>zo,create:()=>go,dot:()=>Yo,equals:()=>aa,exactEquals:()=>oa,fromMat4:()=>To,fromRotation:()=>Eo,fromRotationTranslation:()=>Fo,fromRotationTranslationValues:()=>Ao,fromTranslation:()=>_o,fromValues:()=>Po,getDual:()=>Bo,getReal:()=>Co,getTranslation:()=>Do,identity:()=>So,invert:()=>Qo,len:()=>Jo,length:()=>Ko,lerp:()=>Ho,mul:()=>$o,multiply:()=>Go,normalize:()=>na,rotateAroundAxis:()=>No,rotateByQuatAppend:()=>Vo,rotateByQuatPrepend:()=>qo,rotateX:()=>Lo,rotateY:()=>jo,rotateZ:()=>Uo,scale:()=>Xo,set:()=>Io,setDual:()=>Ro,setReal:()=>Oo,sqrLen:()=>ea,squaredLength:()=>ta,str:()=>ra,translate:()=>ko});var h={};n.r(h),n.d(h,{add:()=>fa,angle:()=>La,ceil:()=>pa,clone:()=>sa,copy:()=>ca,create:()=>ia,cross:()=>Sa,dist:()=>Xa,distance:()=>wa,div:()=>$a,divide:()=>ma,dot:()=>za,equals:()=>qa,exactEquals:()=>Va,floor:()=>ba,forEach:()=>Qa,fromValues:()=>ua,inverse:()=>Ea,len:()=>Na,length:()=>Aa,lerp:()=>Ia,max:()=>xa,min:()=>ya,mul:()=>Ga,multiply:()=>da,negate:()=>_a,normalize:()=>Ta,random:()=>Ca,rotate:()=>ka,round:()=>va,scale:()=>Ma,scaleAndAdd:()=>ga,set:()=>la,sqrDist:()=>Ya,sqrLen:()=>Ha,squaredDistance:()=>Pa,squaredLength:()=>Fa,str:()=>Ua,sub:()=>Wa,subtract:()=>ha,transformMat2:()=>Ba,transformMat2d:()=>Oa,transformMat3:()=>Ra,transformMat4:()=>Da,zero:()=>ja});var d=1e-6,m="undefined"!=typeof Float32Array?Float32Array:Array,p=Math.random;function b(t){m=t}var y=Math.PI/180;function x(t){return t*y}function v(t,e){return Math.abs(t-e)<=d*Math.max(1,Math.abs(t),Math.abs(e))}function M(){var t=new m(4);return m!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function g(t){var e=new m(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function w(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function P(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function A(t,e,n,r){var o=new m(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o}function F(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t}function _(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function E(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n*a-o*r;return i?(i=1/i,t[0]=a*i,t[1]=-r*i,t[2]=-o*i,t[3]=n*i,t):null}function T(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function z(t){return t[0]*t[3]-t[2]*t[1]}function S(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*s+a*u,t[1]=o*s+i*u,t[2]=r*c+a*l,t[3]=o*c+i*l,t}function I(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=o*u+i*s,t[2]=r*-s+a*u,t[3]=o*-s+i*u,t}function C(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=o*s,t[2]=a*u,t[3]=i*u,t}function B(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function O(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function R(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function D(t){return Math.hypot(t[0],t[1],t[2],t[3])}function k(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function L(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function j(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function U(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function V(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],i=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-i)<=d*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-u)<=d*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-c)<=d*Math.max(1,Math.abs(a),Math.abs(c))}function q(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function N(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var W=S,G=j;function $(){var t=new m(6);return m!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function X(t){var e=new m(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Y(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function H(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Q(t,e,n,r,o,a){var i=new m(6);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i[4]=o,i[5]=a,i}function Z(t,e,n,r,o,a,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t}function K(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=n*a-r*o;return u?(u=1/u,t[0]=a*u,t[1]=-r*u,t[2]=-o*u,t[3]=n*u,t[4]=(o*s-a*i)*u,t[5]=(r*i-n*s)*u,t):null}function J(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=n[0],l=n[1],f=n[2],h=n[3],d=n[4],m=n[5];return t[0]=r*c+a*l,t[1]=o*c+i*l,t[2]=r*f+a*h,t[3]=o*f+i*h,t[4]=r*d+a*m+s,t[5]=o*d+i*m+u,t}function et(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=Math.sin(n),l=Math.cos(n);return t[0]=r*l+a*c,t[1]=o*l+i*c,t[2]=r*-c+a*l,t[3]=o*-c+i*l,t[4]=s,t[5]=u,t}function nt(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r*c,t[1]=o*c,t[2]=a*l,t[3]=i*l,t[4]=s,t[5]=u,t}function rt(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=r*c+a*l+s,t[5]=o*c+i*l+u,t}function ot(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function at(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function it(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function st(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ut(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function ct(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function lt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function ft(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function ht(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function dt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function mt(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],s=t[5],u=e[0],c=e[1],l=e[2],f=e[3],h=e[4],m=e[5];return Math.abs(n-u)<=d*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=d*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(o-l)<=d*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(a-f)<=d*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(i-h)<=d*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(s-m)<=d*Math.max(1,Math.abs(s),Math.abs(m))}var pt=tt,bt=lt;function yt(){var t=new m(9);return m!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function xt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function vt(t){var e=new m(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Mt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function gt(t,e,n,r,o,a,i,s,u){var c=new m(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=o,c[5]=a,c[6]=i,c[7]=s,c[8]=u,c}function wt(t,e,n,r,o,a,i,s,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t[6]=s,t[7]=u,t[8]=c,t}function Pt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function At(t,e){if(t===e){var n=e[1],r=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Ft(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=l*i-s*c,h=-l*a+s*u,d=c*a-i*u,m=n*f+r*h+o*d;return m?(m=1/m,t[0]=f*m,t[1]=(-l*r+o*c)*m,t[2]=(s*r-o*i)*m,t[3]=h*m,t[4]=(l*n-o*u)*m,t[5]=(-s*n+o*a)*m,t[6]=d*m,t[7]=(-c*n+r*u)*m,t[8]=(i*n-r*a)*m,t):null}function _t(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8];return t[0]=i*l-s*c,t[1]=o*c-r*l,t[2]=r*s-o*i,t[3]=s*u-a*l,t[4]=n*l-o*u,t[5]=o*a-n*s,t[6]=a*c-i*u,t[7]=r*u-n*c,t[8]=n*i-r*a,t}function Et(t){var e=t[0],n=t[1],r=t[2],o=t[3],a=t[4],i=t[5],s=t[6],u=t[7],c=t[8];return e*(c*a-i*u)+n*(-c*o+i*s)+r*(u*o-a*s)}function Tt(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=n[0],d=n[1],m=n[2],p=n[3],b=n[4],y=n[5],x=n[6],v=n[7],M=n[8];return t[0]=h*r+d*i+m*c,t[1]=h*o+d*s+m*l,t[2]=h*a+d*u+m*f,t[3]=p*r+b*i+y*c,t[4]=p*o+b*s+y*l,t[5]=p*a+b*u+y*f,t[6]=x*r+v*i+M*c,t[7]=x*o+v*s+M*l,t[8]=x*a+v*u+M*f,t}function zt(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=n[0],d=n[1];return t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=s,t[5]=u,t[6]=h*r+d*i+c,t[7]=h*o+d*s+l,t[8]=h*a+d*u+f,t}function St(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=Math.sin(n),d=Math.cos(n);return t[0]=d*r+h*i,t[1]=d*o+h*s,t[2]=d*a+h*u,t[3]=d*i-h*r,t[4]=d*s-h*o,t[5]=d*u-h*a,t[6]=c,t[7]=l,t[8]=f,t}function It(t,e,n){var r=n[0],o=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Ct(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Bt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ot(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Rt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Dt(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n+n,s=r+r,u=o+o,c=n*i,l=r*i,f=r*s,h=o*i,d=o*s,m=o*u,p=a*i,b=a*s,y=a*u;return t[0]=1-f-m,t[3]=l-y,t[6]=h+b,t[1]=l+y,t[4]=1-c-m,t[7]=d-p,t[2]=h-b,t[5]=d+p,t[8]=1-c-f,t}function kt(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],m=e[12],p=e[13],b=e[14],y=e[15],x=n*s-r*i,v=n*u-o*i,M=n*c-a*i,g=r*u-o*s,w=r*c-a*s,P=o*c-a*u,A=l*p-f*m,F=l*b-h*m,_=l*y-d*m,E=f*b-h*p,T=f*y-d*p,z=h*y-d*b,S=x*z-v*T+M*E+g*_-w*F+P*A;return S?(S=1/S,t[0]=(s*z-u*T+c*E)*S,t[1]=(u*_-i*z-c*F)*S,t[2]=(i*T-s*_+c*A)*S,t[3]=(o*T-r*z-a*E)*S,t[4]=(n*z-o*_+a*F)*S,t[5]=(r*_-n*T-a*A)*S,t[6]=(p*P-b*w+y*g)*S,t[7]=(b*M-m*P-y*v)*S,t[8]=(m*w-p*M+y*x)*S,t):null}function Lt(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function jt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Ut(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function Vt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function qt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function Nt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function Wt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function Gt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function $t(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=e[0],h=e[1],m=e[2],p=e[3],b=e[4],y=e[5],x=e[6],v=e[7],M=e[8];return Math.abs(n-f)<=d*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-h)<=d*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(o-m)<=d*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-p)<=d*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(i-b)<=d*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(s-y)<=d*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(u-x)<=d*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(c-v)<=d*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(l-M)<=d*Math.max(1,Math.abs(l),Math.abs(M))}var Xt=Tt,Yt=qt;function Ht(){var t=new m(16);return m!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Qt(t){var e=new m(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Zt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Kt(t,e,n,r,o,a,i,s,u,c,l,f,h,d,p,b){var y=new m(16);return y[0]=t,y[1]=e,y[2]=n,y[3]=r,y[4]=o,y[5]=a,y[6]=i,y[7]=s,y[8]=u,y[9]=c,y[10]=l,y[11]=f,y[12]=h,y[13]=d,y[14]=p,y[15]=b,y}function Jt(t,e,n,r,o,a,i,s,u,c,l,f,h,d,m,p,b){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t[6]=s,t[7]=u,t[8]=c,t[9]=l,t[10]=f,t[11]=h,t[12]=d,t[13]=m,t[14]=p,t[15]=b,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){var n=e[1],r=e[2],o=e[3],a=e[6],i=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=o,t[13]=i,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function ne(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],m=e[12],p=e[13],b=e[14],y=e[15],x=n*s-r*i,v=n*u-o*i,M=n*c-a*i,g=r*u-o*s,w=r*c-a*s,P=o*c-a*u,A=l*p-f*m,F=l*b-h*m,_=l*y-d*m,E=f*b-h*p,T=f*y-d*p,z=h*y-d*b,S=x*z-v*T+M*E+g*_-w*F+P*A;return S?(S=1/S,t[0]=(s*z-u*T+c*E)*S,t[1]=(o*T-r*z-a*E)*S,t[2]=(p*P-b*w+y*g)*S,t[3]=(h*w-f*P-d*g)*S,t[4]=(u*_-i*z-c*F)*S,t[5]=(n*z-o*_+a*F)*S,t[6]=(b*M-m*P-y*v)*S,t[7]=(l*P-h*M+d*v)*S,t[8]=(i*T-s*_+c*A)*S,t[9]=(r*_-n*T-a*A)*S,t[10]=(m*w-p*M+y*x)*S,t[11]=(f*M-l*w-d*x)*S,t[12]=(s*F-i*E-u*A)*S,t[13]=(n*E-r*F+o*A)*S,t[14]=(p*v-m*g-b*x)*S,t[15]=(l*g-f*v+h*x)*S,t):null}function re(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],m=e[12],p=e[13],b=e[14],y=e[15];return t[0]=s*(h*y-d*b)-f*(u*y-c*b)+p*(u*d-c*h),t[1]=-(r*(h*y-d*b)-f*(o*y-a*b)+p*(o*d-a*h)),t[2]=r*(u*y-c*b)-s*(o*y-a*b)+p*(o*c-a*u),t[3]=-(r*(u*d-c*h)-s*(o*d-a*h)+f*(o*c-a*u)),t[4]=-(i*(h*y-d*b)-l*(u*y-c*b)+m*(u*d-c*h)),t[5]=n*(h*y-d*b)-l*(o*y-a*b)+m*(o*d-a*h),t[6]=-(n*(u*y-c*b)-i*(o*y-a*b)+m*(o*c-a*u)),t[7]=n*(u*d-c*h)-i*(o*d-a*h)+l*(o*c-a*u),t[8]=i*(f*y-d*p)-l*(s*y-c*p)+m*(s*d-c*f),t[9]=-(n*(f*y-d*p)-l*(r*y-a*p)+m*(r*d-a*f)),t[10]=n*(s*y-c*p)-i*(r*y-a*p)+m*(r*c-a*s),t[11]=-(n*(s*d-c*f)-i*(r*d-a*f)+l*(r*c-a*s)),t[12]=-(i*(f*b-h*p)-l*(s*b-u*p)+m*(s*h-u*f)),t[13]=n*(f*b-h*p)-l*(r*b-o*p)+m*(r*h-o*f),t[14]=-(n*(s*b-u*p)-i*(r*b-o*p)+m*(r*u-o*s)),t[15]=n*(s*h-u*f)-i*(r*h-o*f)+l*(r*u-o*s),t}function oe(t){var e=t[0],n=t[1],r=t[2],o=t[3],a=t[4],i=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],h=t[11],d=t[12],m=t[13],p=t[14],b=t[15];return(e*i-n*a)*(f*b-h*p)-(e*s-r*a)*(l*b-h*m)+(e*u-o*a)*(l*p-f*m)+(n*s-r*i)*(c*b-h*d)-(n*u-o*i)*(c*p-f*d)+(r*u-o*s)*(c*m-l*d)}function ae(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],d=e[10],m=e[11],p=e[12],b=e[13],y=e[14],x=e[15],v=n[0],M=n[1],g=n[2],w=n[3];return t[0]=v*r+M*s+g*f+w*p,t[1]=v*o+M*u+g*h+w*b,t[2]=v*a+M*c+g*d+w*y,t[3]=v*i+M*l+g*m+w*x,v=n[4],M=n[5],g=n[6],w=n[7],t[4]=v*r+M*s+g*f+w*p,t[5]=v*o+M*u+g*h+w*b,t[6]=v*a+M*c+g*d+w*y,t[7]=v*i+M*l+g*m+w*x,v=n[8],M=n[9],g=n[10],w=n[11],t[8]=v*r+M*s+g*f+w*p,t[9]=v*o+M*u+g*h+w*b,t[10]=v*a+M*c+g*d+w*y,t[11]=v*i+M*l+g*m+w*x,v=n[12],M=n[13],g=n[14],w=n[15],t[12]=v*r+M*s+g*f+w*p,t[13]=v*o+M*u+g*h+w*b,t[14]=v*a+M*c+g*d+w*y,t[15]=v*i+M*l+g*m+w*x,t}function ie(t,e,n){var r,o,a,i,s,u,c,l,f,h,d,m,p=n[0],b=n[1],y=n[2];return e===t?(t[12]=e[0]*p+e[4]*b+e[8]*y+e[12],t[13]=e[1]*p+e[5]*b+e[9]*y+e[13],t[14]=e[2]*p+e[6]*b+e[10]*y+e[14],t[15]=e[3]*p+e[7]*b+e[11]*y+e[15]):(r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],d=e[10],m=e[11],t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=h,t[10]=d,t[11]=m,t[12]=r*p+s*b+f*y+e[12],t[13]=o*p+u*b+h*y+e[13],t[14]=a*p+c*b+d*y+e[14],t[15]=i*p+l*b+m*y+e[15]),t}function se(t,e,n){var r=n[0],o=n[1],a=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ue(t,e,n,r){var o,a,i,s,u,c,l,f,h,m,p,b,y,x,v,M,g,w,P,A,F,_,E,T,z=r[0],S=r[1],I=r[2],C=Math.hypot(z,S,I);return C<d?null:(z*=C=1/C,S*=C,I*=C,o=Math.sin(n),i=1-(a=Math.cos(n)),s=e[0],u=e[1],c=e[2],l=e[3],f=e[4],h=e[5],m=e[6],p=e[7],b=e[8],y=e[9],x=e[10],v=e[11],M=z*z*i+a,g=S*z*i+I*o,w=I*z*i-S*o,P=z*S*i-I*o,A=S*S*i+a,F=I*S*i+z*o,_=z*I*i+S*o,E=S*I*i-z*o,T=I*I*i+a,t[0]=s*M+f*g+b*w,t[1]=u*M+h*g+y*w,t[2]=c*M+m*g+x*w,t[3]=l*M+p*g+v*w,t[4]=s*P+f*A+b*F,t[5]=u*P+h*A+y*F,t[6]=c*P+m*A+x*F,t[7]=l*P+p*A+v*F,t[8]=s*_+f*E+b*T,t[9]=u*_+h*E+y*T,t[10]=c*_+m*E+x*T,t[11]=l*_+p*E+v*T,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ce(t,e,n){var r=Math.sin(n),o=Math.cos(n),a=e[4],i=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*o+c*r,t[5]=i*o+l*r,t[6]=s*o+f*r,t[7]=u*o+h*r,t[8]=c*o-a*r,t[9]=l*o-i*r,t[10]=f*o-s*r,t[11]=h*o-u*r,t}function le(t,e,n){var r=Math.sin(n),o=Math.cos(n),a=e[0],i=e[1],s=e[2],u=e[3],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*o-c*r,t[1]=i*o-l*r,t[2]=s*o-f*r,t[3]=u*o-h*r,t[8]=a*r+c*o,t[9]=i*r+l*o,t[10]=s*r+f*o,t[11]=u*r+h*o,t}function fe(t,e,n){var r=Math.sin(n),o=Math.cos(n),a=e[0],i=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*o+c*r,t[1]=i*o+l*r,t[2]=s*o+f*r,t[3]=u*o+h*r,t[4]=c*o-a*r,t[5]=l*o-i*r,t[6]=f*o-s*r,t[7]=h*o-u*r,t}function he(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function de(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function me(t,e,n){var r,o,a,i=n[0],s=n[1],u=n[2],c=Math.hypot(i,s,u);return c<d?null:(i*=c=1/c,s*=c,u*=c,r=Math.sin(e),a=1-(o=Math.cos(e)),t[0]=i*i*a+o,t[1]=s*i*a+u*r,t[2]=u*i*a-s*r,t[3]=0,t[4]=i*s*a-u*r,t[5]=s*s*a+o,t[6]=u*s*a+i*r,t[7]=0,t[8]=i*u*a+s*r,t[9]=s*u*a-i*r,t[10]=u*u*a+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function pe(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function be(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ye(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function xe(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=r+r,u=o+o,c=a+a,l=r*s,f=r*u,h=r*c,d=o*u,m=o*c,p=a*c,b=i*s,y=i*u,x=i*c;return t[0]=1-(d+p),t[1]=f+x,t[2]=h-y,t[3]=0,t[4]=f-x,t[5]=1-(l+p),t[6]=m+b,t[7]=0,t[8]=h+y,t[9]=m-b,t[10]=1-(l+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function ve(t,e){var n=new m(3),r=-e[0],o=-e[1],a=-e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=r*r+o*o+a*a+i*i;return f>0?(n[0]=2*(s*i+l*r+u*a-c*o)/f,n[1]=2*(u*i+l*o+c*r-s*a)/f,n[2]=2*(c*i+l*a+s*o-u*r)/f):(n[0]=2*(s*i+l*r+u*a-c*o),n[1]=2*(u*i+l*o+c*r-s*a),n[2]=2*(c*i+l*a+s*o-u*r)),xe(t,e,n),t}function Me(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function ge(t,e){var n=e[0],r=e[1],o=e[2],a=e[4],i=e[5],s=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.hypot(n,r,o),t[1]=Math.hypot(a,i,s),t[2]=Math.hypot(u,c,l),t}function we(t,e){var n=new m(3);ge(n,e);var r=1/n[0],o=1/n[1],a=1/n[2],i=e[0]*r,s=e[1]*o,u=e[2]*a,c=e[4]*r,l=e[5]*o,f=e[6]*a,h=e[8]*r,d=e[9]*o,p=e[10]*a,b=i+l+p,y=0;return b>0?(y=2*Math.sqrt(b+1),t[3]=.25*y,t[0]=(f-d)/y,t[1]=(h-u)/y,t[2]=(s-c)/y):i>l&&i>p?(y=2*Math.sqrt(1+i-l-p),t[3]=(f-d)/y,t[0]=.25*y,t[1]=(s+c)/y,t[2]=(h+u)/y):l>p?(y=2*Math.sqrt(1+l-i-p),t[3]=(h-u)/y,t[0]=(s+c)/y,t[1]=.25*y,t[2]=(f+d)/y):(y=2*Math.sqrt(1+p-i-l),t[3]=(s-c)/y,t[0]=(h+u)/y,t[1]=(f+d)/y,t[2]=.25*y),t}function Pe(t,e,n,r){var o=e[0],a=e[1],i=e[2],s=e[3],u=o+o,c=a+a,l=i+i,f=o*u,h=o*c,d=o*l,m=a*c,p=a*l,b=i*l,y=s*u,x=s*c,v=s*l,M=r[0],g=r[1],w=r[2];return t[0]=(1-(m+b))*M,t[1]=(h+v)*M,t[2]=(d-x)*M,t[3]=0,t[4]=(h-v)*g,t[5]=(1-(f+b))*g,t[6]=(p+y)*g,t[7]=0,t[8]=(d+x)*w,t[9]=(p-y)*w,t[10]=(1-(f+m))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Ae(t,e,n,r,o){var a=e[0],i=e[1],s=e[2],u=e[3],c=a+a,l=i+i,f=s+s,h=a*c,d=a*l,m=a*f,p=i*l,b=i*f,y=s*f,x=u*c,v=u*l,M=u*f,g=r[0],w=r[1],P=r[2],A=o[0],F=o[1],_=o[2],E=(1-(p+y))*g,T=(d+M)*g,z=(m-v)*g,S=(d-M)*w,I=(1-(h+y))*w,C=(b+x)*w,B=(m+v)*P,O=(b-x)*P,R=(1-(h+p))*P;return t[0]=E,t[1]=T,t[2]=z,t[3]=0,t[4]=S,t[5]=I,t[6]=C,t[7]=0,t[8]=B,t[9]=O,t[10]=R,t[11]=0,t[12]=n[0]+A-(E*A+S*F+B*_),t[13]=n[1]+F-(T*A+I*F+O*_),t[14]=n[2]+_-(z*A+C*F+R*_),t[15]=1,t}function Fe(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n+n,s=r+r,u=o+o,c=n*i,l=r*i,f=r*s,h=o*i,d=o*s,m=o*u,p=a*i,b=a*s,y=a*u;return t[0]=1-f-m,t[1]=l+y,t[2]=h-b,t[3]=0,t[4]=l-y,t[5]=1-c-m,t[6]=d+p,t[7]=0,t[8]=h+b,t[9]=d-p,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _e(t,e,n,r,o,a,i){var s=1/(n-e),u=1/(o-r),c=1/(a-i);return t[0]=2*a*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(o+r)*u,t[10]=(i+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*a*2*c,t[15]=0,t}function Ee(t,e,n,r,o){var a,i=1/Math.tan(e/2);return t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(a=1/(r-o),t[10]=(o+r)*a,t[14]=2*o*r*a):(t[10]=-1,t[14]=-2*r),t}var Te=Ee;function ze(t,e,n,r,o){var a,i=1/Math.tan(e/2);return t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(a=1/(r-o),t[10]=o*a,t[14]=o*r*a):(t[10]=-1,t[14]=-r),t}function Se(t,e,n,r){var o=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(i+s),c=2/(o+a);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(i-s)*u*.5,t[9]=(o-a)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Ie(t,e,n,r,o,a,i){var s=1/(e-n),u=1/(r-o),c=1/(a-i);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(o+r)*u,t[14]=(i+a)*c,t[15]=1,t}var Ce=Ie;function Be(t,e,n,r,o,a,i){var s=1/(e-n),u=1/(r-o),c=1/(a-i);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=c,t[11]=0,t[12]=(e+n)*s,t[13]=(o+r)*u,t[14]=a*c,t[15]=1,t}function Oe(t,e,n,r){var o,a,i,s,u,c,l,f,h,m,p=e[0],b=e[1],y=e[2],x=r[0],v=r[1],M=r[2],g=n[0],w=n[1],P=n[2];return Math.abs(p-g)<d&&Math.abs(b-w)<d&&Math.abs(y-P)<d?te(t):(l=p-g,f=b-w,h=y-P,o=v*(h*=m=1/Math.hypot(l,f,h))-M*(f*=m),a=M*(l*=m)-x*h,i=x*f-v*l,(m=Math.hypot(o,a,i))?(o*=m=1/m,a*=m,i*=m):(o=0,a=0,i=0),s=f*i-h*a,u=h*o-l*i,c=l*a-f*o,(m=Math.hypot(s,u,c))?(s*=m=1/m,u*=m,c*=m):(s=0,u=0,c=0),t[0]=o,t[1]=s,t[2]=l,t[3]=0,t[4]=a,t[5]=u,t[6]=f,t[7]=0,t[8]=i,t[9]=c,t[10]=h,t[11]=0,t[12]=-(o*p+a*b+i*y),t[13]=-(s*p+u*b+c*y),t[14]=-(l*p+f*b+h*y),t[15]=1,t)}function Re(t,e,n,r){var o=e[0],a=e[1],i=e[2],s=r[0],u=r[1],c=r[2],l=o-n[0],f=a-n[1],h=i-n[2],d=l*l+f*f+h*h;d>0&&(l*=d=1/Math.sqrt(d),f*=d,h*=d);var m=u*h-c*f,p=c*l-s*h,b=s*f-u*l;return(d=m*m+p*p+b*b)>0&&(m*=d=1/Math.sqrt(d),p*=d,b*=d),t[0]=m,t[1]=p,t[2]=b,t[3]=0,t[4]=f*b-h*p,t[5]=h*m-l*b,t[6]=l*p-f*m,t[7]=0,t[8]=l,t[9]=f,t[10]=h,t[11]=0,t[12]=o,t[13]=a,t[14]=i,t[15]=1,t}function De(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function ke(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Le(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function je(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function Ue(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Ve(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function qe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Ne(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],h=t[10],m=t[11],p=t[12],b=t[13],y=t[14],x=t[15],v=e[0],M=e[1],g=e[2],w=e[3],P=e[4],A=e[5],F=e[6],_=e[7],E=e[8],T=e[9],z=e[10],S=e[11],I=e[12],C=e[13],B=e[14],O=e[15];return Math.abs(n-v)<=d*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-M)<=d*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(o-g)<=d*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(a-w)<=d*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(i-P)<=d*Math.max(1,Math.abs(i),Math.abs(P))&&Math.abs(s-A)<=d*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(u-F)<=d*Math.max(1,Math.abs(u),Math.abs(F))&&Math.abs(c-_)<=d*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(l-E)<=d*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(f-T)<=d*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(h-z)<=d*Math.max(1,Math.abs(h),Math.abs(z))&&Math.abs(m-S)<=d*Math.max(1,Math.abs(m),Math.abs(S))&&Math.abs(p-I)<=d*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(b-C)<=d*Math.max(1,Math.abs(b),Math.abs(C))&&Math.abs(y-B)<=d*Math.max(1,Math.abs(y),Math.abs(B))&&Math.abs(x-O)<=d*Math.max(1,Math.abs(x),Math.abs(O))}var We=ae,Ge=je;function $e(){var t=new m(3);return m!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Xe(t){var e=new m(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ye(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function He(t,e,n){var r=new m(3);return r[0]=t,r[1]=e,r[2]=n,r}function Qe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ze(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Ke(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Je(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function tn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function en(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function nn(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function rn(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function on(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function an(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function sn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function un(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function cn(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function ln(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return Math.hypot(n,r,o)}function fn(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return n*n+r*r+o*o}function hn(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function dn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function mn(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function pn(t,e){var n=e[0],r=e[1],o=e[2],a=n*n+r*r+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function bn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function yn(t,e,n){var r=e[0],o=e[1],a=e[2],i=n[0],s=n[1],u=n[2];return t[0]=o*u-a*s,t[1]=a*i-r*u,t[2]=r*s-o*i,t}function xn(t,e,n,r){var o=e[0],a=e[1],i=e[2];return t[0]=o+r*(n[0]-o),t[1]=a+r*(n[1]-a),t[2]=i+r*(n[2]-i),t}function vn(t,e,n,r,o,a){var i=a*a,s=i*(2*a-3)+1,u=i*(a-2)+a,c=i*(a-1),l=i*(3-2*a);return t[0]=e[0]*s+n[0]*u+r[0]*c+o[0]*l,t[1]=e[1]*s+n[1]*u+r[1]*c+o[1]*l,t[2]=e[2]*s+n[2]*u+r[2]*c+o[2]*l,t}function Mn(t,e,n,r,o,a){var i=1-a,s=i*i,u=a*a,c=s*i,l=3*a*s,f=3*u*i,h=u*a;return t[0]=e[0]*c+n[0]*l+r[0]*f+o[0]*h,t[1]=e[1]*c+n[1]*l+r[1]*f+o[1]*h,t[2]=e[2]*c+n[2]*l+r[2]*f+o[2]*h,t}function gn(t,e){e=e||1;var n=2*p()*Math.PI,r=2*p()-1,o=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=r*e,t}function wn(t,e,n){var r=e[0],o=e[1],a=e[2],i=n[3]*r+n[7]*o+n[11]*a+n[15];return i=i||1,t[0]=(n[0]*r+n[4]*o+n[8]*a+n[12])/i,t[1]=(n[1]*r+n[5]*o+n[9]*a+n[13])/i,t[2]=(n[2]*r+n[6]*o+n[10]*a+n[14])/i,t}function Pn(t,e,n){var r=e[0],o=e[1],a=e[2];return t[0]=r*n[0]+o*n[3]+a*n[6],t[1]=r*n[1]+o*n[4]+a*n[7],t[2]=r*n[2]+o*n[5]+a*n[8],t}function An(t,e,n){var r=n[0],o=n[1],a=n[2],i=n[3],s=e[0],u=e[1],c=e[2],l=o*c-a*u,f=a*s-r*c,h=r*u-o*s,d=o*h-a*f,m=a*l-r*h,p=r*f-o*l,b=2*i;return l*=b,f*=b,h*=b,d*=2,m*=2,p*=2,t[0]=s+l+d,t[1]=u+f+m,t[2]=c+h+p,t}function Fn(t,e,n,r){var o=[],a=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],a[0]=o[0],a[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),a[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function _n(t,e,n,r){var o=[],a=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],a[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),a[1]=o[1],a[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function En(t,e,n,r){var o=[],a=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],a[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),a[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),a[2]=o[2],t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function Tn(t,e){var n=t[0],r=t[1],o=t[2],a=e[0],i=e[1],s=e[2],u=Math.sqrt(n*n+r*r+o*o)*Math.sqrt(a*a+i*i+s*s),c=u&&bn(t,e)/u;return Math.acos(Math.min(Math.max(c,-1),1))}function zn(t){return t[0]=0,t[1]=0,t[2]=0,t}function Sn(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function In(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Cn(t,e){var n=t[0],r=t[1],o=t[2],a=e[0],i=e[1],s=e[2];return Math.abs(n-a)<=d*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-i)<=d*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(o-s)<=d*Math.max(1,Math.abs(o),Math.abs(s))}var Bn,On=Je,Rn=tn,Dn=en,kn=ln,Ln=fn,jn=Ye,Un=hn,Vn=(Bn=$e(),function(t,e,n,r,o,a){var i,s;for(e||(e=3),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,i=n;i<s;i+=e)Bn[0]=t[i],Bn[1]=t[i+1],Bn[2]=t[i+2],o(Bn,Bn,a),t[i]=Bn[0],t[i+1]=Bn[1],t[i+2]=Bn[2];return t});function qn(){var t=new m(4);return m!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Nn(t){var e=new m(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Wn(t,e,n,r){var o=new m(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o}function Gn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function $n(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t}function Xn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function Yn(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Hn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function Qn(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function Zn(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Kn(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Jn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function tr(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function er(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function nr(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function rr(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function or(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],a=e[3]-t[3];return Math.hypot(n,r,o,a)}function ar(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],a=e[3]-t[3];return n*n+r*r+o*o+a*a}function ir(t){var e=t[0],n=t[1],r=t[2],o=t[3];return Math.hypot(e,n,r,o)}function sr(t){var e=t[0],n=t[1],r=t[2],o=t[3];return e*e+n*n+r*r+o*o}function ur(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function cr(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function lr(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n*n+r*r+o*o+a*a;return i>0&&(i=1/Math.sqrt(i)),t[0]=n*i,t[1]=r*i,t[2]=o*i,t[3]=a*i,t}function fr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function hr(t,e,n,r){var o=n[0]*r[1]-n[1]*r[0],a=n[0]*r[2]-n[2]*r[0],i=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],l=e[0],f=e[1],h=e[2],d=e[3];return t[0]=f*c-h*u+d*s,t[1]=-l*c+h*i-d*a,t[2]=l*u-f*i+d*o,t[3]=-l*s+f*a-h*o,t}function dr(t,e,n,r){var o=e[0],a=e[1],i=e[2],s=e[3];return t[0]=o+r*(n[0]-o),t[1]=a+r*(n[1]-a),t[2]=i+r*(n[2]-i),t[3]=s+r*(n[3]-s),t}function mr(t,e){var n,r,o,a,i,s;e=e||1;do{i=(n=2*p()-1)*n+(r=2*p()-1)*r}while(i>=1);do{s=(o=2*p()-1)*o+(a=2*p()-1)*a}while(s>=1);var u=Math.sqrt((1-i)/s);return t[0]=e*n,t[1]=e*r,t[2]=e*o*u,t[3]=e*a*u,t}function pr(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3];return t[0]=n[0]*r+n[4]*o+n[8]*a+n[12]*i,t[1]=n[1]*r+n[5]*o+n[9]*a+n[13]*i,t[2]=n[2]*r+n[6]*o+n[10]*a+n[14]*i,t[3]=n[3]*r+n[7]*o+n[11]*a+n[15]*i,t}function br(t,e,n){var r=e[0],o=e[1],a=e[2],i=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*a-u*o,f=c*o+u*r-i*a,h=c*a+i*o-s*r,d=-i*r-s*o-u*a;return t[0]=l*c+d*-i+f*-u-h*-s,t[1]=f*c+d*-s+h*-i-l*-u,t[2]=h*c+d*-u+l*-s-f*-i,t[3]=e[3],t}function yr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function xr(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function vr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Mr(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],i=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-i)<=d*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-u)<=d*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-c)<=d*Math.max(1,Math.abs(a),Math.abs(c))}var gr=Yn,wr=Hn,Pr=Qn,Ar=or,Fr=ar,_r=ir,Er=sr,Tr=function(){var t=qn();return function(e,n,r,o,a,i){var s,u;for(n||(n=4),r||(r=0),u=o?Math.min(o*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],a(t,t,i),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();function zr(){var t=new m(4);return m!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Sr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Ir(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Cr(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>d?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Br(t,e){var n=uo(t,e);return Math.acos(2*n*n-1)}function Or(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+i*s+o*c-a*u,t[1]=o*l+i*u+a*s-r*c,t[2]=a*l+i*c+r*u-o*s,t[3]=i*l-r*s-o*u-a*c,t}function Rr(t,e,n){n*=.5;var r=e[0],o=e[1],a=e[2],i=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=o*u+a*s,t[2]=a*u-o*s,t[3]=i*u-r*s,t}function Dr(t,e,n){n*=.5;var r=e[0],o=e[1],a=e[2],i=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-a*s,t[1]=o*u+i*s,t[2]=a*u+r*s,t[3]=i*u-o*s,t}function kr(t,e,n){n*=.5;var r=e[0],o=e[1],a=e[2],i=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=o*u-r*s,t[2]=a*u+i*s,t[3]=i*u-a*s,t}function Lr(t,e){var n=e[0],r=e[1],o=e[2];return t[0]=n,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),t}function jr(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=Math.sqrt(n*n+r*r+o*o),s=Math.exp(a),u=i>0?s*Math.sin(i)/i:0;return t[0]=n*u,t[1]=r*u,t[2]=o*u,t[3]=s*Math.cos(i),t}function Ur(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=Math.sqrt(n*n+r*r+o*o),s=i>0?Math.atan2(i,a)/i:0;return t[0]=n*s,t[1]=r*s,t[2]=o*s,t[3]=.5*Math.log(n*n+r*r+o*o+a*a),t}function Vr(t,e,n){return Ur(t,e),so(t,t,n),jr(t,t),t}function qr(t,e,n,r){var o,a,i,s,u,c=e[0],l=e[1],f=e[2],h=e[3],m=n[0],p=n[1],b=n[2],y=n[3];return(a=c*m+l*p+f*b+h*y)<0&&(a=-a,m=-m,p=-p,b=-b,y=-y),1-a>d?(o=Math.acos(a),i=Math.sin(o),s=Math.sin((1-r)*o)/i,u=Math.sin(r*o)/i):(s=1-r,u=r),t[0]=s*c+u*m,t[1]=s*l+u*p,t[2]=s*f+u*b,t[3]=s*h+u*y,t}function Nr(t){var e=p(),n=p(),r=p(),o=Math.sqrt(1-e),a=Math.sqrt(e);return t[0]=o*Math.sin(2*Math.PI*n),t[1]=o*Math.cos(2*Math.PI*n),t[2]=a*Math.sin(2*Math.PI*r),t[3]=a*Math.cos(2*Math.PI*r),t}function Wr(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n*n+r*r+o*o+a*a,s=i?1/i:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-o*s,t[3]=a*s,t}function Gr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function $r(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var a=(o+1)%3,i=(o+2)%3;n=Math.sqrt(e[3*o+o]-e[3*a+a]-e[3*i+i]+1),t[o]=.5*n,n=.5/n,t[3]=(e[3*a+i]-e[3*i+a])*n,t[a]=(e[3*a+o]+e[3*o+a])*n,t[i]=(e[3*i+o]+e[3*o+i])*n}return t}function Xr(t,e,n,r){var o=.5*Math.PI/180;e*=o,n*=o,r*=o;var a=Math.sin(e),i=Math.cos(e),s=Math.sin(n),u=Math.cos(n),c=Math.sin(r),l=Math.cos(r);return t[0]=a*u*l-i*s*c,t[1]=i*s*l+a*u*c,t[2]=i*u*c-a*s*l,t[3]=i*u*l+a*s*c,t}function Yr(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Hr,Qr,Zr,Kr,Jr,to,eo=Nn,no=Wn,ro=Gn,oo=$n,ao=Xn,io=Or,so=nr,uo=fr,co=dr,lo=ir,fo=lo,ho=sr,mo=ho,po=lr,bo=vr,yo=Mr,xo=(Hr=$e(),Qr=He(1,0,0),Zr=He(0,1,0),function(t,e,n){var r=bn(e,n);return r<-.999999?(yn(Hr,Qr,e),jn(Hr)<1e-6&&yn(Hr,Zr,e),pn(Hr,Hr),Ir(t,Hr,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(yn(Hr,e,n),t[0]=Hr[0],t[1]=Hr[1],t[2]=Hr[2],t[3]=1+r,po(t,t))}),vo=(Kr=zr(),Jr=zr(),function(t,e,n,r,o,a){return qr(Kr,e,o,a),qr(Jr,n,r,a),qr(t,Kr,Jr,2*a*(1-a)),t}),Mo=(to=yt(),function(t,e,n,r){return to[0]=n[0],to[3]=n[1],to[6]=n[2],to[1]=r[0],to[4]=r[1],to[7]=r[2],to[2]=-e[0],to[5]=-e[1],to[8]=-e[2],po(t,$r(t,to))});function go(){var t=new m(8);return m!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function wo(t){var e=new m(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function Po(t,e,n,r,o,a,i,s){var u=new m(8);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=o,u[5]=a,u[6]=i,u[7]=s,u}function Ao(t,e,n,r,o,a,i){var s=new m(8);s[0]=t,s[1]=e,s[2]=n,s[3]=r;var u=.5*o,c=.5*a,l=.5*i;return s[4]=u*r+c*n-l*e,s[5]=c*r+l*t-u*n,s[6]=l*r+u*e-c*t,s[7]=-u*t-c*e-l*n,s}function Fo(t,e,n){var r=.5*n[0],o=.5*n[1],a=.5*n[2],i=e[0],s=e[1],u=e[2],c=e[3];return t[0]=i,t[1]=s,t[2]=u,t[3]=c,t[4]=r*c+o*u-a*s,t[5]=o*c+a*i-r*u,t[6]=a*c+r*s-o*i,t[7]=-r*i-o*s-a*u,t}function _o(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function Eo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function To(t,e){var n=zr();we(n,e);var r=new m(3);return Me(r,e),Fo(t,n,r),t}function zo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function So(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Io(t,e,n,r,o,a,i,s,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t[6]=s,t[7]=u,t}var Co=ro;function Bo(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Oo=ro;function Ro(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function Do(t,e){var n=e[4],r=e[5],o=e[6],a=e[7],i=-e[0],s=-e[1],u=-e[2],c=e[3];return t[0]=2*(n*c+a*i+r*u-o*s),t[1]=2*(r*c+a*s+o*i-n*u),t[2]=2*(o*c+a*u+n*s-r*i),t}function ko(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=.5*n[0],u=.5*n[1],c=.5*n[2],l=e[4],f=e[5],h=e[6],d=e[7];return t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=i*s+o*c-a*u+l,t[5]=i*u+a*s-r*c+f,t[6]=i*c+r*u-o*s+h,t[7]=-r*s-o*u-a*c+d,t}function Lo(t,e,n){var r=-e[0],o=-e[1],a=-e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=s*i+l*r+u*a-c*o,h=u*i+l*o+c*r-s*a,d=c*i+l*a+s*o-u*r,m=l*i-s*r-u*o-c*a;return Rr(t,e,n),r=t[0],o=t[1],a=t[2],i=t[3],t[4]=f*i+m*r+h*a-d*o,t[5]=h*i+m*o+d*r-f*a,t[6]=d*i+m*a+f*o-h*r,t[7]=m*i-f*r-h*o-d*a,t}function jo(t,e,n){var r=-e[0],o=-e[1],a=-e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=s*i+l*r+u*a-c*o,h=u*i+l*o+c*r-s*a,d=c*i+l*a+s*o-u*r,m=l*i-s*r-u*o-c*a;return Dr(t,e,n),r=t[0],o=t[1],a=t[2],i=t[3],t[4]=f*i+m*r+h*a-d*o,t[5]=h*i+m*o+d*r-f*a,t[6]=d*i+m*a+f*o-h*r,t[7]=m*i-f*r-h*o-d*a,t}function Uo(t,e,n){var r=-e[0],o=-e[1],a=-e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=s*i+l*r+u*a-c*o,h=u*i+l*o+c*r-s*a,d=c*i+l*a+s*o-u*r,m=l*i-s*r-u*o-c*a;return kr(t,e,n),r=t[0],o=t[1],a=t[2],i=t[3],t[4]=f*i+m*r+h*a-d*o,t[5]=h*i+m*o+d*r-f*a,t[6]=d*i+m*a+f*o-h*r,t[7]=m*i-f*r-h*o-d*a,t}function Vo(t,e,n){var r=n[0],o=n[1],a=n[2],i=n[3],s=e[0],u=e[1],c=e[2],l=e[3];return t[0]=s*i+l*r+u*a-c*o,t[1]=u*i+l*o+c*r-s*a,t[2]=c*i+l*a+s*o-u*r,t[3]=l*i-s*r-u*o-c*a,s=e[4],u=e[5],c=e[6],l=e[7],t[4]=s*i+l*r+u*a-c*o,t[5]=u*i+l*o+c*r-s*a,t[6]=c*i+l*a+s*o-u*r,t[7]=l*i-s*r-u*o-c*a,t}function qo(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+i*s+o*c-a*u,t[1]=o*l+i*u+a*s-r*c,t[2]=a*l+i*c+r*u-o*s,t[3]=i*l-r*s-o*u-a*c,s=n[4],u=n[5],c=n[6],l=n[7],t[4]=r*l+i*s+o*c-a*u,t[5]=o*l+i*u+a*s-r*c,t[6]=a*l+i*c+r*u-o*s,t[7]=i*l-r*s-o*u-a*c,t}function No(t,e,n,r){if(Math.abs(r)<d)return zo(t,e);var o=Math.hypot(n[0],n[1],n[2]);r*=.5;var a=Math.sin(r),i=a*n[0]/o,s=a*n[1]/o,u=a*n[2]/o,c=Math.cos(r),l=e[0],f=e[1],h=e[2],m=e[3];t[0]=l*c+m*i+f*u-h*s,t[1]=f*c+m*s+h*i-l*u,t[2]=h*c+m*u+l*s-f*i,t[3]=m*c-l*i-f*s-h*u;var p=e[4],b=e[5],y=e[6],x=e[7];return t[4]=p*c+x*i+b*u-y*s,t[5]=b*c+x*s+y*i-p*u,t[6]=y*c+x*u+p*s-b*i,t[7]=x*c-p*i-b*s-y*u,t}function Wo(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function Go(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=n[4],u=n[5],c=n[6],l=n[7],f=e[4],h=e[5],d=e[6],m=e[7],p=n[0],b=n[1],y=n[2],x=n[3];return t[0]=r*x+i*p+o*y-a*b,t[1]=o*x+i*b+a*p-r*y,t[2]=a*x+i*y+r*b-o*p,t[3]=i*x-r*p-o*b-a*y,t[4]=r*l+i*s+o*c-a*u+f*x+m*p+h*y-d*b,t[5]=o*l+i*u+a*s-r*c+h*x+m*b+d*p-f*y,t[6]=a*l+i*c+r*u-o*s+d*x+m*y+f*b-h*p,t[7]=i*l-r*s-o*u-a*c+m*x-f*p-h*b-d*y,t}var $o=Go;function Xo(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var Yo=uo;function Ho(t,e,n,r){var o=1-r;return Yo(e,n)<0&&(r=-r),t[0]=e[0]*o+n[0]*r,t[1]=e[1]*o+n[1]*r,t[2]=e[2]*o+n[2]*r,t[3]=e[3]*o+n[3]*r,t[4]=e[4]*o+n[4]*r,t[5]=e[5]*o+n[5]*r,t[6]=e[6]*o+n[6]*r,t[7]=e[7]*o+n[7]*r,t}function Qo(t,e){var n=ta(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function Zo(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Ko=lo,Jo=Ko,ta=ho,ea=ta;function na(t,e){var n=ta(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,o=e[1]/n,a=e[2]/n,i=e[3]/n,s=e[4],u=e[5],c=e[6],l=e[7],f=r*s+o*u+a*c+i*l;t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=(s-r*f)/n,t[5]=(u-o*f)/n,t[6]=(c-a*f)/n,t[7]=(l-i*f)/n}return t}function ra(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function oa(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function aa(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],s=t[5],u=t[6],c=t[7],l=e[0],f=e[1],h=e[2],m=e[3],p=e[4],b=e[5],y=e[6],x=e[7];return Math.abs(n-l)<=d*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-f)<=d*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(o-h)<=d*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(a-m)<=d*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(i-p)<=d*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(s-b)<=d*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(u-y)<=d*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-x)<=d*Math.max(1,Math.abs(c),Math.abs(x))}function ia(){var t=new m(2);return m!=Float32Array&&(t[0]=0,t[1]=0),t}function sa(t){var e=new m(2);return e[0]=t[0],e[1]=t[1],e}function ua(t,e){var n=new m(2);return n[0]=t,n[1]=e,n}function ca(t,e){return t[0]=e[0],t[1]=e[1],t}function la(t,e,n){return t[0]=e,t[1]=n,t}function fa(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function ha(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function da(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function ma(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function pa(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function ba(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function ya(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function xa(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function va(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function Ma(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function ga(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function wa(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function Pa(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function Aa(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function Fa(t){var e=t[0],n=t[1];return e*e+n*n}function _a(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Ea(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Ta(t,e){var n=e[0],r=e[1],o=n*n+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t}function za(t,e){return t[0]*e[0]+t[1]*e[1]}function Sa(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function Ia(t,e,n,r){var o=e[0],a=e[1];return t[0]=o+r*(n[0]-o),t[1]=a+r*(n[1]-a),t}function Ca(t,e){e=e||1;var n=2*p()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function Ba(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o,t[1]=n[1]*r+n[3]*o,t}function Oa(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o+n[4],t[1]=n[1]*r+n[3]*o+n[5],t}function Ra(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[3]*o+n[6],t[1]=n[1]*r+n[4]*o+n[7],t}function Da(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[4]*o+n[12],t[1]=n[1]*r+n[5]*o+n[13],t}function ka(t,e,n,r){var o=e[0]-n[0],a=e[1]-n[1],i=Math.sin(r),s=Math.cos(r);return t[0]=o*s-a*i+n[0],t[1]=o*i+a*s+n[1],t}function La(t,e){var n=t[0],r=t[1],o=e[0],a=e[1],i=Math.sqrt(n*n+r*r)*Math.sqrt(o*o+a*a),s=i&&(n*o+r*a)/i;return Math.acos(Math.min(Math.max(s,-1),1))}function ja(t){return t[0]=0,t[1]=0,t}function Ua(t){return"vec2("+t[0]+", "+t[1]+")"}function Va(t,e){return t[0]===e[0]&&t[1]===e[1]}function qa(t,e){var n=t[0],r=t[1],o=e[0],a=e[1];return Math.abs(n-o)<=d*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=d*Math.max(1,Math.abs(r),Math.abs(a))}var Na=Aa,Wa=ha,Ga=da,$a=ma,Xa=wa,Ya=Pa,Ha=Fa,Qa=function(){var t=ia();return function(e,n,r,o,a,i){var s,u;for(n||(n=2),r||(r=0),u=o?Math.min(o*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],a(t,t,i),e[s]=t[0],e[s+1]=t[1];return e}}()},562:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=r(n(599));class a{constructor(t,e){this.minPoint=t,this.maxPoint=e}getVertices(){return{position:{numComponents:3,data:[this.minPoint.x,this.minPoint.y,this.minPoint.z,this.maxPoint.x,this.minPoint.y,this.minPoint.z,this.maxPoint.x,this.maxPoint.y,this.minPoint.z,this.minPoint.x,this.maxPoint.y,this.minPoint.z,this.minPoint.x,this.minPoint.y,this.maxPoint.z,this.maxPoint.x,this.minPoint.y,this.maxPoint.z,this.maxPoint.x,this.maxPoint.y,this.maxPoint.z,this.minPoint.x,this.maxPoint.y,this.maxPoint.z]},indices:{numComponents:2,data:[0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]}}}getSize(){return new o.default(this.maxPoint.x-this.minPoint.x,this.maxPoint.y-this.minPoint.y,this.maxPoint.z-this.minPoint.z)}getCenter(){return new o.default((this.minPoint.x+this.maxPoint.x)/2,(this.minPoint.y+this.maxPoint.y)/2,(this.minPoint.z+this.maxPoint.z)/2)}distanceToPoint(t){const e=Math.max(this.minPoint.x,Math.min(t.x,this.maxPoint.x)),n=Math.max(this.minPoint.y,Math.min(t.y,this.maxPoint.y)),r=Math.max(this.minPoint.z,Math.min(t.z,this.maxPoint.z));return Math.sqrt((e-t.x)*(e-t.x)+(n-t.y)*(n-t.y)+(r-t.z)*(r-t.z))}isInstersectsRay(t,e){const n=(this.minPoint.x-t.x)/e.x,r=(this.maxPoint.x-t.x)/e.x,o=(this.minPoint.y-t.y)/e.y,a=(this.maxPoint.y-t.y)/e.y,i=(this.minPoint.z-t.z)/e.z,s=(this.maxPoint.z-t.z)/e.z,u=Math.max(Math.max(Math.min(n,r),Math.min(o,a)),Math.min(i,s)),c=Math.min(Math.min(Math.max(n,r),Math.max(o,a)),Math.max(i,s));return c>=0&&u<=c}isIntersectsSphere(t,e){const n=Math.max(this.minPoint.x,Math.min(t.x,this.maxPoint.x)),r=Math.max(this.minPoint.y,Math.min(t.y,this.maxPoint.y)),o=Math.max(this.minPoint.z,Math.min(t.z,this.maxPoint.z));return Math.sqrt((n-t.x)*(n-t.x)+(r-t.y)*(r-t.y)+(o-t.z)*(o-t.z))<e}isIntersectsBox(t){return!(this.minPoint.x>t.maxPoint.x||this.maxPoint.x<t.minPoint.x||this.minPoint.y>t.maxPoint.y||this.maxPoint.y<t.minPoint.y||this.minPoint.z>t.maxPoint.z||this.maxPoint.z<t.minPoint.z)}containsLine(t){return this.isPointInside(t.start)&&this.isPointInside(t.end)}intersectsLineSegment(t,e){const n=o.default.subscract(e,t);let r=(this.minPoint.x-t.x)/n.x,a=(this.maxPoint.x-t.x)/n.x;const i=(this.minPoint.y-t.y)/n.y,s=(this.maxPoint.y-t.y)/n.y;if(r>s||i>a)return!1;i>r&&(r=i),s<a&&(a=s);const u=(this.minPoint.z-t.z)/n.z;return!(r>(this.maxPoint.z-t.z)/n.z||u>a)}intersectsLine(t){return this.intersectsLineSegment(t.start,t.end)}containsTriangle(t){return this.isPointInside(t.vertices[0])&&this.isPointInside(t.vertices[1])&&this.isPointInside(t.vertices[2])}intersectsTriangle(t){const e=new o.default(Math.min(t.vertices[0].x,t.vertices[1].x,t.vertices[2].x),Math.min(t.vertices[0].y,t.vertices[1].y,t.vertices[2].y),Math.min(t.vertices[0].z,t.vertices[1].z,t.vertices[2].z)),n=new o.default(Math.max(t.vertices[0].x,t.vertices[1].x,t.vertices[2].x),Math.max(t.vertices[0].y,t.vertices[1].y,t.vertices[2].y),Math.max(t.vertices[0].z,t.vertices[1].z,t.vertices[2].z));return!(this.minPoint.x>n.x||this.maxPoint.x<e.x||this.minPoint.y>n.y||this.maxPoint.y<e.y||this.minPoint.z>n.z||this.maxPoint.z<e.z)}isPointInside(t){return t.x>=this.minPoint.x&&t.x<=this.maxPoint.x&&t.y>=this.minPoint.y&&t.y<=this.maxPoint.y&&t.z>=this.minPoint.z&&t.z<=this.maxPoint.z}subdivide(){const{x:t,y:e,z:n}=this.getSize(),r=t/2,i=e/2,s=n/2;return[new a(this.minPoint,o.default.add(this.minPoint,new o.default(r,i,s))),new a(o.default.add(this.minPoint,new o.default(r,0,0)),o.default.add(this.minPoint,new o.default(t,i,s))),new a(o.default.add(this.minPoint,new o.default(0,i,0)),o.default.add(this.minPoint,new o.default(r,e,s))),new a(o.default.add(this.minPoint,new o.default(r,i,0)),o.default.add(this.minPoint,new o.default(t,e,s))),new a(o.default.add(this.minPoint,new o.default(0,0,s)),o.default.add(this.minPoint,new o.default(r,i,n))),new a(o.default.add(this.minPoint,new o.default(r,0,s)),o.default.add(this.minPoint,new o.default(t,i,n))),new a(o.default.add(this.minPoint,new o.default(0,i,s)),o.default.add(this.minPoint,new o.default(r,e,n))),new a(o.default.add(this.minPoint,new o.default(r,i,s)),o.default.add(this.minPoint,new o.default(t,e,n)))]}}e.default=a},217:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=r(n(599));e.default=class{constructor(t,e){this.start=t,this.end=e}getVertices(){return{position:{numComponents:3,data:[this.start.x,this.start.y,this.start.z,this.end.x,this.end.y,this.end.z]},indices:{numComponents:2,data:[0,1]}}}intersectWithRay(t){const e=this.start,n=this.end,r=o.default.subscract(n,e),a=o.default.subscract(t.dir,t.origin),i=o.default.cross(t.dir,a),s=o.default.dot(r,i);if(s>-Number.EPSILON&&s<Number.EPSILON)return null;const u=1/s,c=o.default.subscract(t.origin,e),l=u*o.default.dot(c,i);if(l<0||l>1)return null;const f=o.default.cross(c,r),h=u*o.default.dot(t.dir,f);if(h<0||l+h>1)return null;const d=u*o.default.dot(a,f);return o.default.add(t.origin,o.default.multiply(t.dir,d))}}},499:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=r(n(599));e.default=class{constructor(t,e=""){this.vertices=t,this.id=e}getVertices(){return{position:{numComponents:3,data:[this.vertices[0].x,this.vertices[0].y,this.vertices[0].z,this.vertices[1].x,this.vertices[1].y,this.vertices[1].z,this.vertices[2].x,this.vertices[2].y,this.vertices[2].z]},indices:{numComponents:3,data:[0,1,2]}}}intersectWithRay(t){const e=this.vertices[0],n=this.vertices[1],r=this.vertices[2],a=o.default.subscract(n,e),i=o.default.subscract(r,e),s=o.default.cross(t.dir,i),u=o.default.dot(a,s);if(u>-Number.EPSILON&&u<Number.EPSILON)return null;const c=1/u,l=o.default.subscract(t.origin,e),f=c*o.default.dot(l,s);if(f<0||f>1)return null;const h=o.default.cross(l,a),d=c*o.default.dot(t.dir,h);if(d<0||f+d>1)return null;const m=c*o.default.dot(i,h);return m>Number.EPSILON?o.default.add(t.origin,o.default.multiply(t.dir,m)):null}}},599:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}add(t,e=new n){return e.x=this.x+t.x,e.y=this.y+t.y,e.z=this.z+t.z,e}static normalize(t,e=new n){const r=n.magnitude(t);return 0===r?new n:(e.x=t.x/r,e.y=t.y/r,e.z=t.z/r,e)}static multiply(t,e,r=new n){return r.x=t.x*e,r.y=t.y*e,r.z=t.z*e,r}static cross(t,e,r=new n){return r.x=t.y*e.z-t.z*e.y,r.y=t.z*e.x-t.x*e.z,r.z=t.x*e.y-t.y*e.x,r}static dot(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}static pack(t,e=[],n=0){return e[n]=t.x,e[n+1]=t.y,e[n+2]=t.z,e}static packArray(t,e){const r=t.length,o=e||new Array(3*r);for(let e=0;e<t.length;e++)n.pack(t[e],o,3*e);return o}static fromArray(t){const[e,r,o]=t;return new n(e,r,o)}static add(t,e,r){return r?(r.x=t.x+e.x,r.y=t.y+e.y,r.z=t.z+e.z,r):new n(t.x+e.x,t.y+e.y,t.z+e.z)}static subscract(t,e,r){return r?(r.x=t.x-e.x,r.y=t.y-e.y,r.z=t.z-e.z,r):new n(t.x-e.x,t.y-e.y,t.z-e.z)}static magnitudeSquare(t){return t.x*t.x+t.y*t.y+t.z*t.z}static magnitude(t){return Math.sqrt(n.magnitudeSquare(t))}static distance(t,e){return n.magnitude(n.subscract(t,e))}}n.temp1=new n,e.default=n},462:function(t,e,n){var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});const i=a(n(882));e.default=class{constructor(t){this.canvas=t,this._anchor=i.v3.create(0,0,0),this._position=i.v3.create(0,0,5),this._direction=i.v3.create(0,0,-1),this._target=i.v3.create(0,0,0),this._right=i.v3.create(),this._up=i.v3.create(0,1,0),this.viewMatrix=i.m4.identity(),this.inverseViewMatrix=i.m4.identity(),this._heading=0,this._pitch=0,this._roll=0}get anchor(){return this._anchor}set anchor(t){this._anchor=t}get position(){return this._position}set position(t){this._position=t,this.updateViewMatrix()}get direction(){return this._direction}set direction(t){this._direction=t}get target(){return this._target}set target(t){this._target=t,this.updateViewMatrix()}get right(){return this._right}set right(t){this._right=t}get up(){return this._up}set up(t){this._up=t,this.updateViewMatrix()}get headingInAngle(){return 180*this._heading/Math.PI}get pitchInAngle(){return 180*this._pitch/Math.PI}get rollInAngle(){return 180*this._roll/Math.PI}get heading(){return this._heading}set heading(t){this._heading=t,this.updateViewMatrix()}get pitch(){return this._pitch}set pitch(t){this._pitch=t,this.updateViewMatrix()}get roll(){return this._roll}set roll(t){this._roll=t,this.updateViewMatrix()}updateViewMatrix(){const t=i.v3.subtract(this.target,this.position);this.inverseViewMatrix=i.m4.lookAt(this.position,this.target,this.up),this.viewMatrix=i.m4.inverse(this.inverseViewMatrix);const e=i.v3.normalize(t),n=i.v3.normalize(this.up),r=i.v3.cross(n,e);this._right=i.v3.normalize(r),this._up=n,this._direction=e}rotateAroundPoint(t,e,n){const r=this.anchor||n,o=i.v3.subtract(this.position,r),a=i.v3.subtract(this.target,r),s=i.m4.axisRotation(this.right,-e),u=i.m4.axisRotation(this.up,t),c=i.m4.multiply(u,s),l=i.m4.transformPoint(c,o),f=i.m4.transformPoint(c,a);this._target=i.v3.add(f,r),this.position=i.v3.add(l,r)}rotateByPoint(t,e,n){const r=this.anchor||n,o=i.v3.subtract(this.position,r),a=i.v3.subtract(this.target,r),s=i.v3.subtract(this.up,r),u=i.m4.axisRotation(this.right,-e),c=i.m4.axisRotation(this.up,t),l=i.m4.multiply(c,u),f=i.m4.transformPoint(l,o),h=i.m4.transformPoint(l,a),d=i.m4.transformPoint(l,s);this._up=i.v3.add(d,r),this._target=i.v3.add(h,r),this.position=i.v3.add(f,r)}registerMouseEvent(t){const{canvas:e}=this;let n=0,r=0,o=!1,a=!1;e.addEventListener("wheel",(e=>{const{deltaY:n}=e,r=this.direction,o=i.v3.add(this.position,i.v3.mulScalar(r,-.1*n));this.position=o,t(e)})),e.addEventListener("mousedown",(t=>{n=t.clientX,r=t.clientY,o=!0,1===t.button&&(a=!0)})),e.addEventListener("mousemove",(e=>{if(o){const o=e.clientX,a=e.clientY,s=a-r,u=o-n;this.rotateAroundPoint(.01*-u,.01*-s,i.v3.create(0,0,0)),n=o,r=a,t(e)}})),document.addEventListener("mouseup",(t=>{o=!1,a=!1})),e.oncontextmenu=()=>!1}screenToWorld(t,e,n){const{canvas:r}=this,{width:o,height:a}=r,{inverseViewMatrix:s}=this,u=[t/o*2-1,1-e/a*2,-1,1],c=i.m4.inverse(n),l=i.m4.multiply(s,c);return i.m4.transformPoint(l,u)}}},544:function(t,e,n){var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.addTag=e.getQuadVertics=e.getQuadShader=e.drawTextInCanvas2D=void 0;const u=a(n(882)),c=s(n(599)),l=({text:t="Hello World",color:e="red",x:n=32,y:r=32,width:o=64,height:a=64,fontSize:i=32,fontFamily:s="monospace"})=>{const u=document.createElement("canvas");u.width=o,u.height=a;const c=u.getContext("2d");if(!c)throw new Error("2d context not supported");return c.clearRect(0,0,o,a),c.fillStyle="transparent",c.fillRect(0,0,o,a),c.fillStyle=e,c.font=`${i}px ${s}`,c.textBaseline="middle",c.textAlign="center",c.fillText(t,n,r),u.toDataURL()};e.drawTextInCanvas2D=l,e.getQuadShader=()=>({fs:"\n    precision mediump float;\n    varying vec2 v_texcoord;\n    uniform sampler2D texture;\n    void main() {\n      gl_FragColor = texture2D(texture, v_texcoord);\n    }\n    ",vs:"\n    attribute vec2 position;\n    attribute vec2 texcoord;\n    varying vec2 v_texcoord;\n\n    uniform mat4 modelMatrix;\n    uniform mat4 viewMatrix;\n    uniform mat4 projectionMatrix;\n\n    void main() {\n      vec4 pos = vec4(position, 0, 1);\n      gl_Position =  projectionMatrix * viewMatrix * modelMatrix * pos;\n      v_texcoord = texcoord;\n    }\n    "}),e.getQuadVertics=()=>({position:{numComponents:2,data:[-1,-1,1,-1,-1,1,1,1].map((t=>1*t))},indices:{numComponents:3,data:[0,1,2,2,1,3]},texcoord:{numComponents:2,data:[0,0,1,0,0,1,1,1]}});const f=new Map;e.addTag=t=>i(void 0,[t],void 0,(function*({gl:t,worldPos:e=new c.default,text:n="A",fontSize:r=32}){return new Promise(((o,a)=>{const i=u.m4.translation([e.x,e.y,e.z]),s=l({text:n,width:128,height:128,fontSize:r,x:64,y:64,color:"white",fontFamily:"Arial"});if(!t)throw new Error("WebGL not supported");const c=f.get(n);void 0===c?u.createTexture(t,{src:s,flipY:1},((t,r,s)=>{t&&a(t),f.set(n,r),o({texture:r,modelMatrix:i,worldPos:e})})):o({texture:c,modelMatrix:i,worldPos:e})}))}))},706:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InputText=e.CustomBtn=void 0,e.CustomBtn=class{constructor(t,e,n=!0,r=""){if(!1===n)return;const o=document.createElement("button");o.addEventListener("click",e),o.innerHTML=t,o.title=r;const a=document.getElementById("btn-container");if(!a)throw new Error("btn-container not found");a.append(o)}},e.InputText=class{constructor({inputName:t="",isShow:e=!0,title:n="",defaultValue:r="",placeholder:o=""}){const a=document.createElement("input"),i=document.createElement("div");this.inputEle=a,a.type="text",a.placeholder=o,a.id=t;const s=document.getElementById("btn-container");if(n){a.title="";const e=document.createElement("label");e.innerHTML=`${n}: `,e.htmlFor=t,i.append(e)}a.value=r,i.append(a),s.append(i),e||(a.style.display="none")}get value(){return this.inputEle.value}get input(){return this.inputEle}}},587:function(t,e,n){var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const u=a(n(882)),c=a(n(72)),l=s(n(734)),f=s(n(562)),h=s(n(599)),d=n(706),m=s(n(462)),p=n(544),b=s(n(217)),y=s(n(499));!function(){i(this,void 0,void 0,(function*(){const t=new l.default({bounds:new f.default(new h.default(-10,-10,-10),new h.default(10,10,10)),maxDepth:3,nodeMaxChildrenCount:4,depth:0,parentNode:null});console.log("",t.maxDepth),console.log("",t.nodeMaxChildrenCount),console.log("",t.depth);const e=document.getElementById("webgl"),n=e.getContext("webgl",{alpha:!0,antialias:!0});if(!n)throw new Error("WebGL not supported");const r=u.createProgramInfo(n,["\n    attribute vec3 position;\n    uniform mat4 modelMatrix;\n    uniform mat4 viewMatrix;\n    uniform mat4 projectionMatrix;\n    uniform float pointSize;\n    void main() {\n      gl_Position =  projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);\n      // gl_Position =  position;\n      gl_PointSize = pointSize;\n    }\n  ","\n  precision mediump float;\n  uniform vec4 u_color;\n    void main() {\n      gl_FragColor = u_color;\n    }\n  "]),{fs:o,vs:a}=(0,p.getQuadShader)(),s=u.createProgramInfo(n,[a,o]),x=u.primitives.createXYQuadBufferInfo(n,4),v=u.m4.identity(),M=new m.default(e);M.position=[0,0,40],M.target=[0,0,0],M.up=[0,1,0];const g=u.m4.perspective(Math.PI/4,1,.1,1e3),w=[{worldPos:new h.default(10,10,10),text:"10,10,10"},{worldPos:new h.default(-10,-10,-10),text:"-10,-10,-10",fontSize:20}],P=[];console.log(P);const A=t=>i(this,void 0,void 0,(function*(){n.useProgram(s.program),n.enable(n.BLEND),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),u.setBuffersAndAttributes(n,s,x);const e=M.position,r=u.v3.subtract(e,[t.worldPos.x,t.worldPos.y,t.worldPos.z]);c.vec3.normalize(r,r);const o=c.vec3.fromValues(0,0,1),a=c.quat.create();c.quat.rotationTo(a,o,r);const i=c.mat4.create();c.mat4.fromQuat(i,a);const l=u.m4.multiply(t.modelMatrix,i);u.setUniforms(s,{modelMatrix:l,projectionMatrix:g,viewMatrix:M.viewMatrix,texture:t.texture}),u.drawBufferInfo(n,x)}));let F=!0;new d.CustomBtn("toggleBoundingBox",(()=>{F=!F}));const _={origin:void 0,dir:void 0};let E;const T=e=>{u.resizeCanvasToDisplaySize(n.canvas),n.viewport(0,0,n.canvas.width,n.canvas.height),n.clearColor(0,0,0,1),n.enable(n.DEPTH_TEST),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.useProgram(r.program),(()=>{const e=t.getAllPointVertices(),o=u.createBufferInfoFromArrays(n,e);n.useProgram(r.program),u.setBuffersAndAttributes(n,r,o),u.setUniforms(r,{modelMatrix:v,viewMatrix:M.viewMatrix,projectionMatrix:g,u_color:[1,0,0,1],pointSize:4}),u.drawBufferInfo(n,o,n.POINTS)})(),(()=>{const e=t.getAllTriangleVertices(),o=u.createBufferInfoFromArrays(n,e);n.useProgram(r.program),u.setBuffersAndAttributes(n,r,o),u.setUniforms(r,{modelMatrix:v,viewMatrix:M.viewMatrix,projectionMatrix:g,u_color:[1,1,0,1],pointSize:4}),u.drawBufferInfo(n,o,n.TRIANGLES)})(),(()=>{const e=t.getAllLineVertices(),o=u.createBufferInfoFromArrays(n,e);n.useProgram(r.program),u.setBuffersAndAttributes(n,r,o),u.setUniforms(r,{modelMatrix:v,viewMatrix:M.viewMatrix,projectionMatrix:g,u_color:[1,0,1,1],pointSize:4}),u.drawBufferInfo(n,o,n.LINES)})(),F&&(()=>{const e=t.getAllAABBVertices(),o=u.createBufferInfoFromArrays(n,e);n.useProgram(r.program),u.setBuffersAndAttributes(n,r,o),u.setUniforms(r,{modelMatrix:v,viewMatrix:M.viewMatrix,projectionMatrix:g,u_color:[0,1,0,1],pointSize:4}),u.drawBufferInfo(n,o,n.LINES)})(),w.forEach((t=>i(this,void 0,void 0,(function*(){const e=yield(0,p.addTag)({gl:n,worldPos:t.worldPos,text:`${t.worldPos.x},${t.worldPos.y},${t.worldPos.z}`,fontSize:t.fontSize});A(e)})))),((t,e,o=0)=>{if(!t||!e)return;E||(E=o-16);const a=o-E;a>2e3&&(E=o);const i=h.default.normalize(e),s=h.default.add(t,h.default.multiply(i,.05*a)),c={position:{numComponents:3,data:[t.x,t.y,t.z,s.x,s.y,s.z]}},l=u.createBufferInfoFromArrays(n,c);n.useProgram(r.program),u.setBuffersAndAttributes(n,r,l),u.setUniforms(r,{modelMatrix:v,viewMatrix:M.viewMatrix,projectionMatrix:g,u_color:[1,1,1,1],pointSize:4}),u.drawBufferInfo(n,l,n.LINES)})(_.origin,_.dir,e),(()=>{n.disable(n.DEPTH_TEST);const t=P.map((t=>[t.worldPos.x,t.worldPos.y,t.worldPos.z])).flat();if(0===t.length)return;const e={position:{numComponents:3,data:[...t]}},o=u.createBufferInfoFromArrays(n,e);n.useProgram(r.program),u.setBuffersAndAttributes(n,r,o),u.setUniforms(r,{modelMatrix:u.m4.identity(),viewMatrix:M.viewMatrix,projectionMatrix:g,u_color:[1,.5,.5,1],pointSize:10}),u.drawBufferInfo(n,o,n.POINTS)})(),requestAnimationFrame(T)};T(0),M.registerMouseEvent((()=>{}));const z=(t,e)=>{const n=e-t,r=Math.random()*n+t,o=Math.random()*n+t,a=Math.random()*n+t;return new h.default(r,o,a)};console.log(t),new d.CustomBtn("addRandomPoint",(()=>{const e=z(-10,10);t.insert(e)})),new d.CustomBtn("addRandomTriangle",(()=>{const e=z(-10,10),n=z(-10,10),r=z(-10,10),o=new y.default([e,n,r]);t.insert(o)})),new d.CustomBtn("addRandomLine",(()=>{const e=z(-10,10),n=z(-10,10),r=new b.default(e,n);t.insert(r)}));const S=new d.InputText({inputName:"point",placeholder:"X,Y,Z like  1,2,3",isShow:!0,title:"point",defaultValue:"1,2,3"});new d.CustomBtn("addInputPoint",(()=>{const e=S.value.split(",");if(e.length<3)return void alert("please input 3 number");const n=parseFloat(e[0]),r=parseFloat(e[1]),o=parseFloat(e[2]),a=new h.default(n,r,o);t.addPoint(a)})),new d.CustomBtn("addInputPointAndTagIt",(()=>i(this,void 0,void 0,(function*(){const e=S.value.split(",");if(e.length<3)return void alert("please input 3 number");const n=parseFloat(e[0]),r=parseFloat(e[1]),o=parseFloat(e[2]),a=new h.default(n,r,o);t.addPoint(a),w.push({worldPos:a,text:`${n},${r},${o}`})}))));let I=!1;new d.CustomBtn("togglePickRay",(()=>{I=!I}),!0,"Pick ray from click on Canvas"),e.addEventListener("click",(e=>{if(I){P.length=0;const{offsetX:n,offsetY:r}=e,o=M.screenToWorld(n,r,g);_.origin=new h.default(M.position[0],M.position[1],M.position[2]);const a=new h.default(o[0],o[1],o[2]),i=h.default.subscract(a,_.origin);_.dir=i,t.intersectWithRay({origin:_.origin,dir:i}).map((t=>{P.push({worldPos:t,modelMatrix:u.m4.translation([t.x,t.y,t.z])})}))}}));const C=new d.InputText({inputName:"rayOrigin",placeholder:"ray origin X,Y,Z like  1,2,3",isShow:!0,title:"rayOrigin",defaultValue:"20,20,20"}),B=new d.InputText({inputName:"rayDir",placeholder:"ray dir X,Y,Z like  1,2,3",isShow:!0,title:"rayDir",defaultValue:"-1,-1,-1"});new d.CustomBtn("rayIntersect",(()=>{P.length=0;const e=C.value.split(",");if(e.length<3)return alert("please input 3 number"),void C.input.focus();const n=parseFloat(e[0]),r=parseFloat(e[1]),o=parseFloat(e[2]),a=new h.default(n,r,o),i=B.value.split(",");if(i.length<3)return alert("please input 3 number"),void B.input.focus();const s=parseFloat(i[0]),c=parseFloat(i[1]),l=parseFloat(i[2]),f=new h.default(s,c,l);_.dir=f,_.origin=a;const d=t.intersectWithRay({origin:a,dir:f});console.log(" resAry ---- ",d),d.map((t=>{P.push({worldPos:t,modelMatrix:u.m4.translation([t.x,t.y,t.z])})}))}))}))}()},734:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=r(n(562)),a=r(n(217)),i=r(n(499)),s=r(n(599));class u{constructor(t){let{bounds:e,maxDepth:n,nodeMaxChildrenCount:r,parentNode:a,depth:i}=t;e=e||new o.default(new s.default(-10,-10,-10),new s.default(10,10,10)),r=r||8,i=i||0,n=n||8,a=a||null,this.bounds=e,this.children=[],this.points=[],this.lines=[],this.triangles=[],this.maxDepth=n,this._depth=i,this._parent=a,this.nodeMaxChildrenCount=r}get count(){return this.points.length+this.lines.length+this.triangles.length}get parentNode(){return this._parent}get isRoot(){return null===this.parentNode}get recursiveCount(){let t=this.count;for(const e of this.children)t+=e.recursiveCount;return t}get isLeaf(){return 0===this.children.length}get depth(){return this._depth}set depth(t){this._depth=t;for(const e of this.children)e.depth=t+1}containsPoint(t){return this.bounds.isPointInside(t)}calculateIndexForPoint(t,e){let n=0;return t.x>=e.x&&(n+=1),t.y>=e.y&&(n+=2),t.z>=e.z&&(n+=4),n}getChildNodeIndex(t){const e=this.bounds.getCenter(),n=new Set;return t instanceof s.default?n.add(this.calculateIndexForPoint(t,e)):t instanceof a.default?(n.add(this.calculateIndexForPoint(t.start,e)),n.add(this.calculateIndexForPoint(t.end,e))):t instanceof i.default&&t.vertices.forEach((t=>{n.add(this.calculateIndexForPoint(t,e))})),Array.from(n)}subdivideAndReassignElement(){if(this.count>this.nodeMaxChildrenCount&&this.depth<this.maxDepth){this.subdivide();for(const t of this.triangles)this.getChildNodeIndex(t).map((e=>{this.children[e].insertTriangle(t)}));for(const t of this.points)this.getChildNodeIndex(t).map((e=>{this.children[e].insertPoint(t)}));for(const t of this.lines)this.getChildNodeIndex(t).map((e=>{this.children[e].insertLine(t)}));this.lines.length=0,this.points.length=0,this.triangles.length=0}}insertTriangle(t){this.children.length>0?this.getChildNodeIndex(t).map((e=>{this.children[e].insertTriangle(t)})):(this.triangles.push(t),this.subdivideAndReassignElement())}insertLine(t){this.children.length>0?this.getChildNodeIndex(t).map((e=>{this.children[e].insertLine(t)})):(this.lines.push(t),this.subdivideAndReassignElement())}insertPoint(t){this.children.length>0?this.getChildNodeIndex(t).map((e=>{this.children[e].insertPoint(t)})):(this.points.push(t),this.subdivideAndReassignElement())}removePoint(t){const e=this.points.indexOf(t);return-1!==e&&(this.points.splice(e,1),!0)}addPoint(t){return this.insert(t)}containsLine(t){return this.bounds.containsLine(t)}containsTriangle(t){return this.bounds.intersectsTriangle(t)}containsElement(t){return t instanceof s.default?this.containsPoint(t):t instanceof a.default?this.containsLine(t):t instanceof i.default&&this.containsTriangle(t)}insert(t){return this.containsElement(t)?(t instanceof s.default&&this.insertPoint(t),t instanceof a.default&&this.insertLine(t),t instanceof i.default&&this.insertTriangle(t),!0):(console.log("Element is out of bounds"),!1)}subdivide(){const t=this.depth+1,e=this.bounds.subdivide();this.children.push(new u({bounds:e[0],depth:t,maxDepth:this.maxDepth,nodeMaxChildrenCount:this.nodeMaxChildrenCount,parentNode:this}),new u({bounds:e[1],depth:t,maxDepth:this.maxDepth,nodeMaxChildrenCount:this.nodeMaxChildrenCount,parentNode:this}),new u({bounds:e[2],depth:t,maxDepth:this.maxDepth,nodeMaxChildrenCount:this.nodeMaxChildrenCount,parentNode:this}),new u({bounds:e[3],depth:t,maxDepth:this.maxDepth,nodeMaxChildrenCount:this.nodeMaxChildrenCount,parentNode:this}),new u({bounds:e[4],depth:t,maxDepth:this.maxDepth,nodeMaxChildrenCount:this.nodeMaxChildrenCount,parentNode:this}),new u({bounds:e[5],depth:t,maxDepth:this.maxDepth,nodeMaxChildrenCount:this.nodeMaxChildrenCount,parentNode:this}),new u({bounds:e[6],depth:t,maxDepth:this.maxDepth,nodeMaxChildrenCount:this.nodeMaxChildrenCount,parentNode:this}),new u({bounds:e[7],depth:t,maxDepth:this.maxDepth,nodeMaxChildrenCount:this.nodeMaxChildrenCount,parentNode:this}))}findDeepestContainingNode(t){if(!this.containsPoint(t))return null;for(const e of this.children)if(e.containsPoint(t))return e.findDeepestContainingNode(t);return this}queryClosest(t,e){let n=null,r=e;for(const e of this.points){const o=s.default.distance(e,t);o<r&&(r=o,n=e)}for(const e of this.children)if(e.bounds.distanceToPoint(t)<r){const o=e.queryClosest(t,r),a=o?s.default.distance(o,t):1/0;a<r&&(r=a,n=o)}return n}getAllLine(){const t=[];t.push(...this.lines);for(const e of this.children)t.push(...e.getAllLine());return t}getAllLineVertices(){const t=this.getAllLine().map((t=>t.getVertices())),e={numComponents:3,data:[]},n={numComponents:2,data:[]};return t.map((t=>{const{position:r,indices:o}=t,a=e.data.length/3;e.data.push(...r.data),o.data.map((t=>{n.data.push(t+a)}))})),{position:e,indices:n}}getAllTriangle(){const t=[];t.push(...this.triangles);for(const e of this.children)t.push(...e.getAllTriangle());return t}getAllTriangleVertices(){const t=this.getAllTriangle().map((t=>t.getVertices())),e={numComponents:3,data:[]},n={numComponents:3,data:[]};return t.map((t=>{const{position:r,indices:o}=t,a=e.data.length/3;e.data.push(...r.data),o.data.map((t=>{n.data.push(t+a)}))})),{position:e,indices:n}}getAllPoint(){const t=[];t.push(...this.points);for(const e of this.children)t.push(...e.getAllPoint());return t}getAllPointVertices(){const t=this.getAllPoint(),e={numComponents:3,data:[]};return t.map((t=>{e.data.push(t.x,t.y,t.z)})),{position:e}}getAllBoundingBox(){const t=[];t.push(this.bounds);for(const e of this.children)t.push(...e.getAllBoundingBox());return t}getAllAABBVertices(){const t=this.getAllBoundingBox().map((t=>t.getVertices())),e={numComponents:3,data:[]},n={numComponents:2,data:[]};return t.map((t=>{const{position:r,indices:o}=t,a=e.data.length/3;e.data.push(...r.data),o.data.map((t=>{n.data.push(t+a)}))})),{position:e,indices:n}}intersectWithRay(t){const e=[];if(!this.bounds.isInstersectsRay(t.origin,t.dir))return e;for(const t of this.points);for(const n of this.lines){const r=n.intersectWithRay(t);r&&e.push(r)}for(const n of this.triangles){const r=n.intersectWithRay(t);r&&e.push(r)}for(const n of this.children)e.push(...n.intersectWithRay(t));return e}}e.default=u},882:(t,e,n)=>{n.r(e),n.d(e,{addExtensionsToContext:()=>Si,attributes:()=>vt,bindFramebufferInfo:()=>xi,bindTransformFeedbackInfo:()=>Ta,bindUniformBlock:()=>Ra,canFilter:()=>qr,canGenerateMipmap:()=>Vr,createAttribsFromArrays:()=>dt,createAttributeSetters:()=>Va,createBufferFromArray:()=>yt,createBufferFromTypedArray:()=>nt,createBufferInfoFromArrays:()=>bt,createBuffersFromArrays:()=>xt,createFramebufferInfo:()=>bi,createProgram:()=>ma,createProgramAsync:()=>ba,createProgramFromScripts:()=>Ma,createProgramFromSources:()=>ga,createProgramInfo:()=>$a,createProgramInfoAsync:()=>ya,createProgramInfoFromProgram:()=>Wa,createProgramInfos:()=>Ha,createProgramInfosAsync:()=>Za,createPrograms:()=>Ya,createProgramsAsync:()=>Qa,createSampler:()=>Jr,createSamplers:()=>to,createTexture:()=>mo,createTextures:()=>bo,createTransformFeedback:()=>za,createTransformFeedbackInfo:()=>Ea,createUniformBlockInfo:()=>Oa,createUniformBlockInfoFromProgram:()=>Ba,createUniformBlockSpecFromProgram:()=>Sa,createUniformSetters:()=>_a,createVAOAndSetAttributes:()=>wi,createVAOFromBufferInfo:()=>Pi,createVertexArrayInfo:()=>gi,draw:()=>ri,drawBufferInfo:()=>ei,drawObjectList:()=>ni,framebuffers:()=>vi,getArray_:()=>ot,getBytesPerElementForInternalFormat:()=>Lr,getContext:()=>Ci,getFormatAndTypeForInternalFormat:()=>jr,getGLTypeForTypedArray:()=>z,getGLTypeForTypedArrayType:()=>S,getNumComponentsForFormat:()=>Nr,getNumComponents_:()=>st,getTypedArrayTypeForGLType:()=>I,getWebGLContext:()=>Ii,glEnumToString:()=>Me,isArrayBuffer:()=>C,isWebGL1:()=>ve,isWebGL2:()=>xe,loadTextureFromUrl:()=>lo,m4:()=>M,primitives:()=>ye,programs:()=>Ka,resizeCanvasToDisplaySize:()=>Bi,resizeFramebufferInfo:()=>yi,resizeTexture:()=>po,setAttribInfoBufferFromArray:()=>mt,setAttributeDefaults_:()=>tt,setAttributePrefix:()=>J,setAttributes:()=>qa,setBlockUniforms:()=>ka,setBuffersAndAttributes:()=>Na,setDefaultTextureColor:()=>$r,setDefaults:()=>_i,setEmptyTexture:()=>ho,setSamplerParameters:()=>Kr,setTextureDefaults_:()=>Xr,setTextureFilteringForSize:()=>eo,setTextureFromArray:()=>fo,setTextureFromElement:()=>ao,setTextureParameters:()=>Zr,setUniformBlock:()=>Da,setUniforms:()=>ja,setUniformsAndBindTextures:()=>Ua,textures:()=>yo,typedarrays:()=>B,utils:()=>ge,v3:()=>l,vertexArrays:()=>Ai});let r=Float32Array;function o(t,e,n){const o=new r(3);return t&&(o[0]=t),e&&(o[1]=e),n&&(o[2]=n),o}function a(t,e,n){return(n=n||new r(3))[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n}function i(t,e,n){return(n=n||new r(3))[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n}function s(t,e,n){n=n||new r(3);const o=t[2]*e[0]-t[0]*e[2],a=t[0]*e[1]-t[1]*e[0];return n[0]=t[1]*e[2]-t[2]*e[1],n[1]=o,n[2]=a,n}function u(t,e){e=e||new r(3);const n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],o=Math.sqrt(n);return o>1e-5?(e[0]=t[0]/o,e[1]=t[1]/o,e[2]=t[2]/o):(e[0]=0,e[1]=0,e[2]=0),e}function c(t,e,n){return(n=n||new r(3))[0]=t[0]*e[0],n[1]=t[1]*e[1],n[2]=t[2]*e[2],n}var l=Object.freeze({__proto__:null,add:a,copy:function(t,e){return(e=e||new r(3))[0]=t[0],e[1]=t[1],e[2]=t[2],e},create:o,cross:s,distance:function(t,e){const n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(n*n+r*r+o*o)},distanceSq:function(t,e){const n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return n*n+r*r+o*o},divide:function(t,e,n){return(n=n||new r(3))[0]=t[0]/e[0],n[1]=t[1]/e[1],n[2]=t[2]/e[2],n},divScalar:function(t,e,n){return(n=n||new r(3))[0]=t[0]/e,n[1]=t[1]/e,n[2]=t[2]/e,n},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},lerp:function(t,e,n,o){return(o=o||new r(3))[0]=t[0]+n*(e[0]-t[0]),o[1]=t[1]+n*(e[1]-t[1]),o[2]=t[2]+n*(e[2]-t[2]),o},lerpV:function(t,e,n,o){return(o=o||new r(3))[0]=t[0]+n[0]*(e[0]-t[0]),o[1]=t[1]+n[1]*(e[1]-t[1]),o[2]=t[2]+n[2]*(e[2]-t[2]),o},length:function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])},lengthSq:function(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]},max:function(t,e,n){return(n=n||new r(3))[0]=Math.max(t[0],e[0]),n[1]=Math.max(t[1],e[1]),n[2]=Math.max(t[2],e[2]),n},min:function(t,e,n){return(n=n||new r(3))[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.min(t[2],e[2]),n},mulScalar:function(t,e,n){return(n=n||new r(3))[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n},multiply:c,negate:function(t,e){return(e=e||new r(3))[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},normalize:u,setDefaultType:function(t){const e=r;return r=t,e},subtract:i});let f,h,d,m=Float32Array;function p(t,e){return(e=e||new m(16))[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function b(t){return(t=t||new m(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function y(t,e){e=e||new m(16);const n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],h=t[10],d=t[11],p=t[12],b=t[13],y=t[14],x=t[15],v=h*x,M=y*d,g=u*x,w=y*c,P=u*d,A=h*c,F=o*x,_=y*a,E=o*d,T=h*a,z=o*c,S=u*a,I=l*b,C=p*f,B=i*b,O=p*s,R=i*f,D=l*s,k=n*b,L=p*r,j=n*f,U=l*r,V=n*s,q=i*r,N=v*s+w*f+P*b-(M*s+g*f+A*b),W=M*r+F*f+T*b-(v*r+_*f+E*b),G=g*r+_*s+z*b-(w*r+F*s+S*b),$=A*r+E*s+S*f-(P*r+T*s+z*f),X=1/(n*N+i*W+l*G+p*$);return e[0]=X*N,e[1]=X*W,e[2]=X*G,e[3]=X*$,e[4]=X*(M*i+g*l+A*p-(v*i+w*l+P*p)),e[5]=X*(v*n+_*l+E*p-(M*n+F*l+T*p)),e[6]=X*(w*n+F*i+S*p-(g*n+_*i+z*p)),e[7]=X*(P*n+T*i+z*l-(A*n+E*i+S*l)),e[8]=X*(I*c+O*d+R*x-(C*c+B*d+D*x)),e[9]=X*(C*a+k*d+U*x-(I*a+L*d+j*x)),e[10]=X*(B*a+L*c+V*x-(O*a+k*c+q*x)),e[11]=X*(D*a+j*c+q*d-(R*a+U*c+V*d)),e[12]=X*(B*h+D*y+C*u-(R*y+I*u+O*h)),e[13]=X*(j*y+I*o+L*h-(k*h+U*y+C*o)),e[14]=X*(k*u+q*y+O*o-(V*y+B*o+L*u)),e[15]=X*(V*h+R*o+U*u-(j*u+q*h+D*o)),e}function x(t,e,n){n=n||o();const r=e[0],a=e[1],i=e[2],s=r*t[3]+a*t[7]+i*t[11]+t[15];return n[0]=(r*t[0]+a*t[4]+i*t[8]+t[12])/s,n[1]=(r*t[1]+a*t[5]+i*t[9]+t[13])/s,n[2]=(r*t[2]+a*t[6]+i*t[10]+t[14])/s,n}function v(t,e,n){n=n||o();const r=e[0],a=e[1],i=e[2];return n[0]=r*t[0]+a*t[4]+i*t[8],n[1]=r*t[1]+a*t[5]+i*t[9],n[2]=r*t[2]+a*t[6]+i*t[10],n}var M=Object.freeze({__proto__:null,axisRotate:function(t,e,n,r){r=r||new m(16);let o=e[0],a=e[1],i=e[2];const s=Math.sqrt(o*o+a*a+i*i);o/=s,a/=s,i/=s;const u=o*o,c=a*a,l=i*i,f=Math.cos(n),h=Math.sin(n),d=1-f,p=u+(1-u)*f,b=o*a*d+i*h,y=o*i*d-a*h,x=o*a*d-i*h,v=c+(1-c)*f,M=a*i*d+o*h,g=o*i*d+a*h,w=a*i*d-o*h,P=l+(1-l)*f,A=t[0],F=t[1],_=t[2],E=t[3],T=t[4],z=t[5],S=t[6],I=t[7],C=t[8],B=t[9],O=t[10],R=t[11];return r[0]=p*A+b*T+y*C,r[1]=p*F+b*z+y*B,r[2]=p*_+b*S+y*O,r[3]=p*E+b*I+y*R,r[4]=x*A+v*T+M*C,r[5]=x*F+v*z+M*B,r[6]=x*_+v*S+M*O,r[7]=x*E+v*I+M*R,r[8]=g*A+w*T+P*C,r[9]=g*F+w*z+P*B,r[10]=g*_+w*S+P*O,r[11]=g*E+w*I+P*R,t!==r&&(r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r},axisRotation:function(t,e,n){n=n||new m(16);let r=t[0],o=t[1],a=t[2];const i=Math.sqrt(r*r+o*o+a*a);r/=i,o/=i,a/=i;const s=r*r,u=o*o,c=a*a,l=Math.cos(e),f=Math.sin(e),h=1-l;return n[0]=s+(1-s)*l,n[1]=r*o*h+a*f,n[2]=r*a*h-o*f,n[3]=0,n[4]=r*o*h-a*f,n[5]=u+(1-u)*l,n[6]=o*a*h+r*f,n[7]=0,n[8]=r*a*h+o*f,n[9]=o*a*h-r*f,n[10]=c+(1-c)*l,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},copy:p,create:function(){return new m(16).fill(0)},frustum:function(t,e,n,r,o,a,i){const s=e-t,u=r-n,c=o-a;return(i=i||new m(16))[0]=2*o/s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*o/u,i[6]=0,i[7]=0,i[8]=(t+e)/s,i[9]=(r+n)/u,i[10]=a/c,i[11]=-1,i[12]=0,i[13]=0,i[14]=o*a/c,i[15]=0,i},getAxis:function(t,e,n){const r=4*e;return(n=n||o())[0]=t[r+0],n[1]=t[r+1],n[2]=t[r+2],n},getTranslation:function(t,e){return(e=e||o())[0]=t[12],e[1]=t[13],e[2]=t[14],e},identity:b,inverse:y,lookAt:function(t,e,n,r){return r=r||new m(16),f=f||o(),h=h||o(),d=d||o(),u(i(t,e,d),d),u(s(n,d,f),f),u(s(d,f,h),h),r[0]=f[0],r[1]=f[1],r[2]=f[2],r[3]=0,r[4]=h[0],r[5]=h[1],r[6]=h[2],r[7]=0,r[8]=d[0],r[9]=d[1],r[10]=d[2],r[11]=0,r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r},multiply:function(t,e,n){n=n||new m(16);const r=t[0],o=t[1],a=t[2],i=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=t[9],d=t[10],p=t[11],b=t[12],y=t[13],x=t[14],v=t[15],M=e[0],g=e[1],w=e[2],P=e[3],A=e[4],F=e[5],_=e[6],E=e[7],T=e[8],z=e[9],S=e[10],I=e[11],C=e[12],B=e[13],O=e[14],R=e[15];return n[0]=r*M+s*g+f*w+b*P,n[1]=o*M+u*g+h*w+y*P,n[2]=a*M+c*g+d*w+x*P,n[3]=i*M+l*g+p*w+v*P,n[4]=r*A+s*F+f*_+b*E,n[5]=o*A+u*F+h*_+y*E,n[6]=a*A+c*F+d*_+x*E,n[7]=i*A+l*F+p*_+v*E,n[8]=r*T+s*z+f*S+b*I,n[9]=o*T+u*z+h*S+y*I,n[10]=a*T+c*z+d*S+x*I,n[11]=i*T+l*z+p*S+v*I,n[12]=r*C+s*B+f*O+b*R,n[13]=o*C+u*B+h*O+y*R,n[14]=a*C+c*B+d*O+x*R,n[15]=i*C+l*B+p*O+v*R,n},negate:function(t,e){return(e=e||new m(16))[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=-t[7],e[8]=-t[8],e[9]=-t[9],e[10]=-t[10],e[11]=-t[11],e[12]=-t[12],e[13]=-t[13],e[14]=-t[14],e[15]=-t[15],e},ortho:function(t,e,n,r,o,a,i){return(i=i||new m(16))[0]=2/(e-t),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2/(r-n),i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2/(o-a),i[11]=0,i[12]=(e+t)/(t-e),i[13]=(r+n)/(n-r),i[14]=(a+o)/(o-a),i[15]=1,i},perspective:function(t,e,n,r,o){o=o||new m(16);const a=Math.tan(.5*Math.PI-.5*t),i=1/(n-r);return o[0]=a/e,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(n+r)*i,o[11]=-1,o[12]=0,o[13]=0,o[14]=n*r*i*2,o[15]=0,o},rotateX:function(t,e,n){n=n||new m(16);const r=t[4],o=t[5],a=t[6],i=t[7],s=t[8],u=t[9],c=t[10],l=t[11],f=Math.cos(e),h=Math.sin(e);return n[4]=f*r+h*s,n[5]=f*o+h*u,n[6]=f*a+h*c,n[7]=f*i+h*l,n[8]=f*s-h*r,n[9]=f*u-h*o,n[10]=f*c-h*a,n[11]=f*l-h*i,t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},rotateY:function(t,e,n){n=n||new m(16);const r=t[0],o=t[1],a=t[2],i=t[3],s=t[8],u=t[9],c=t[10],l=t[11],f=Math.cos(e),h=Math.sin(e);return n[0]=f*r-h*s,n[1]=f*o-h*u,n[2]=f*a-h*c,n[3]=f*i-h*l,n[8]=f*s+h*r,n[9]=f*u+h*o,n[10]=f*c+h*a,n[11]=f*l+h*i,t!==n&&(n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},rotateZ:function(t,e,n){n=n||new m(16);const r=t[0],o=t[1],a=t[2],i=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=Math.cos(e),h=Math.sin(e);return n[0]=f*r+h*s,n[1]=f*o+h*u,n[2]=f*a+h*c,n[3]=f*i+h*l,n[4]=f*s-h*r,n[5]=f*u-h*o,n[6]=f*c-h*a,n[7]=f*l-h*i,t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},rotationX:function(t,e){e=e||new m(16);const n=Math.cos(t),r=Math.sin(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},rotationY:function(t,e){e=e||new m(16);const n=Math.cos(t),r=Math.sin(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},rotationZ:function(t,e){e=e||new m(16);const n=Math.cos(t),r=Math.sin(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},scale:function(t,e,n){n=n||new m(16);const r=e[0],o=e[1],a=e[2];return n[0]=r*t[0],n[1]=r*t[1],n[2]=r*t[2],n[3]=r*t[3],n[4]=o*t[4],n[5]=o*t[5],n[6]=o*t[6],n[7]=o*t[7],n[8]=a*t[8],n[9]=a*t[9],n[10]=a*t[10],n[11]=a*t[11],t!==n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},scaling:function(t,e){return(e=e||new m(16))[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},setAxis:function(t,e,n,r){r!==t&&(r=p(t,r));const o=4*n;return r[o+0]=e[0],r[o+1]=e[1],r[o+2]=e[2],r},setDefaultType:function(t){const e=m;return m=t,e},setTranslation:function(t,e,n){return t!==(n=n||b())&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11]),n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n},transformDirection:v,transformNormal:function(t,e,n){n=n||o();const r=y(t),a=e[0],i=e[1],s=e[2];return n[0]=a*r[0]+i*r[1]+s*r[2],n[1]=a*r[4]+i*r[5]+s*r[6],n[2]=a*r[8]+i*r[9]+s*r[10],n},transformPoint:x,translate:function(t,e,n){n=n||new m(16);const r=e[0],o=e[1],a=e[2],i=t[0],s=t[1],u=t[2],c=t[3],l=t[4],f=t[5],h=t[6],d=t[7],p=t[8],b=t[9],y=t[10],x=t[11],v=t[12],M=t[13],g=t[14],w=t[15];return t!==n&&(n[0]=i,n[1]=s,n[2]=u,n[3]=c,n[4]=l,n[5]=f,n[6]=h,n[7]=d,n[8]=p,n[9]=b,n[10]=y,n[11]=x),n[12]=i*r+l*o+p*a+v,n[13]=s*r+f*o+b*a+M,n[14]=u*r+h*o+y*a+g,n[15]=c*r+d*o+x*a+w,n},translation:function(t,e){return(e=e||new m(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},transpose:function(t,e){if((e=e||new m(16))===t){let n;return n=t[1],t[1]=t[4],t[4]=n,n=t[2],t[2]=t[8],t[8]=n,n=t[3],t[3]=t[12],t[12]=n,n=t[6],t[6]=t[9],t[9]=n,n=t[7],t[7]=t[13],t[13]=n,n=t[11],t[11]=t[14],t[14]=n,e}const n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],h=t[10],d=t[11],p=t[12],b=t[13],y=t[14],x=t[15];return e[0]=n,e[1]=i,e[2]=l,e[3]=p,e[4]=r,e[5]=s,e[6]=f,e[7]=b,e[8]=o,e[9]=u,e[10]=h,e[11]=y,e[12]=a,e[13]=c,e[14]=d,e[15]=x,e}});const g=5120,w=5121,P=5122,A=5123,F=5124,_=5125,E=5126,T={};{const t=T;t[g]=Int8Array,t[w]=Uint8Array,t[P]=Int16Array,t[A]=Uint16Array,t[F]=Int32Array,t[_]=Uint32Array,t[E]=Float32Array,t[32819]=Uint16Array,t[32820]=Uint16Array,t[33635]=Uint16Array,t[5131]=Uint16Array,t[33640]=Uint32Array,t[35899]=Uint32Array,t[35902]=Uint32Array,t[36269]=Uint32Array,t[34042]=Uint32Array}function z(t){if(t instanceof Int8Array)return g;if(t instanceof Uint8Array)return w;if(t instanceof Uint8ClampedArray)return w;if(t instanceof Int16Array)return P;if(t instanceof Uint16Array)return A;if(t instanceof Int32Array)return F;if(t instanceof Uint32Array)return _;if(t instanceof Float32Array)return E;throw new Error("unsupported typed array type")}function S(t){if(t===Int8Array)return g;if(t===Uint8Array)return w;if(t===Uint8ClampedArray)return w;if(t===Int16Array)return P;if(t===Uint16Array)return A;if(t===Int32Array)return F;if(t===Uint32Array)return _;if(t===Float32Array)return E;throw new Error("unsupported typed array type")}function I(t){const e=T[t];if(!e)throw new Error("unknown gl type");return e}const C="undefined"!=typeof SharedArrayBuffer?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};var B=Object.freeze({__proto__:null,getGLTypeForTypedArray:z,getGLTypeForTypedArrayType:S,getTypedArrayTypeForGLType:I,isArrayBuffer:C});function O(t,e){Object.keys(e).forEach((function(n){e.hasOwnProperty(n)&&t.hasOwnProperty(n)&&(e[n]=t[n])}))}function R(...t){console.error(...t)}function D(...t){console.warn(...t)}const k=new Map;function L(t,e){if(!t||"object"!=typeof t)return!1;let n=k.get(e);n||(n=new WeakMap,k.set(e,n));let r=n.get(t);if(void 0===r){const o=Object.prototype.toString.call(t);r=o.substring(8,o.length-1)===e,n.set(t,r)}return r}function j(t,e){return"undefined"!=typeof WebGLRenderbuffer&&L(e,"WebGLRenderbuffer")}function U(t,e){return"undefined"!=typeof WebGLTexture&&L(e,"WebGLTexture")}const V=35044,q=34962,N=34963,W=34660,G=5120,$=5121,X=5122,Y=5123,H=5124,Q=5125,Z=5126,K={attribPrefix:""};function J(t){K.attribPrefix=t}function tt(t){O(t,K)}function et(t,e,n,r,o){t.bindBuffer(e,n),t.bufferData(e,r,o||V)}function nt(t,e,n,r){if("undefined"!=typeof WebGLBuffer&&L(e,"WebGLBuffer"))return e;n=n||q;const o=t.createBuffer();return et(t,n,o,e,r),o}function rt(t){return"indices"===t}function ot(t){return t.length?t:t.data}const at=/coord|texture/i,it=/color|colour/i;function st(t,e,n){return t.numComponents||t.size||function(t,e){let n;if(n=at.test(t)?2:it.test(t)?4:3,e%n>0)throw new Error(`Can not guess numComponents for attribute '${t}'. Tried ${n} but ${e} values is not evenly divisible by ${n}. You should specify it.`);return n}(e,n||ot(t).length)}function ut(t,e){if(C(t))return t;if(C(t.data))return t.data;Array.isArray(t)&&(t={data:t});let n=t.type?ct(t.type):void 0;return n||(n=rt(e)?Uint16Array:Float32Array),new n(t.data)}function ct(t){return"number"==typeof t?I(t):t||Float32Array}function lt(t,e){return{buffer:e.buffer,numValues:24,type:(n=e.type,"number"==typeof n?n:n?S(n):Z),arrayType:ct(e.type)};var n}function ft(t,e){const n=e.data||e,r=ct(e.type),o=n*r.BYTES_PER_ELEMENT,a=t.createBuffer();return t.bindBuffer(q,a),t.bufferData(q,o,e.drawType||V),{buffer:a,numValues:n,type:S(r),arrayType:r}}function ht(t,e,n){const r=ut(e,n);return{arrayType:r.constructor,buffer:nt(t,r,void 0,e.drawType),type:z(r),numValues:0}}function dt(t,e){const n={};return Object.keys(e).forEach((function(r){if(!rt(r)){const a=e[r],i=a.attrib||a.name||a.attribName||K.attribPrefix+r;if(a.value){if(!Array.isArray(a.value)&&!C(a.value))throw new Error("array.value is not array or typedarray");n[i]={value:a.value}}else{let e;e=a.buffer&&a.buffer instanceof WebGLBuffer?lt:"number"==typeof a||"number"==typeof a.data?ft:ht;const{buffer:s,type:u,numValues:c,arrayType:l}=e(t,a,r),f=void 0!==a.normalize?a.normalize:(o=l)===Int8Array||o===Uint8Array,h=st(a,r,c);n[i]={buffer:s,numComponents:h,type:u,normalize:f,stride:a.stride||0,offset:a.offset||0,divisor:void 0===a.divisor?void 0:a.divisor,drawType:a.drawType}}}var o})),t.bindBuffer(q,null),n}function mt(t,e,n,r){n=ut(n),void 0!==r?(t.bindBuffer(q,e.buffer),t.bufferSubData(q,r,n)):et(t,q,e.buffer,n,e.drawType)}const pt=["position","positions","a_position"];function bt(t,e,n){const r=dt(t,e),o=Object.assign({},n||{});o.attribs=Object.assign({},n?n.attribs:{},r);const a=e.indices;if(a){const e=ut(a,"indices");o.indices=nt(t,e,N),o.numElements=e.length,o.elementType=z(e)}else o.numElements||(o.numElements=function(t,e){let n,r;for(r=0;r<pt.length&&(n=pt[r],!(n in e))&&(n=K.attribPrefix+n,!(n in e));++r);r===pt.length&&(n=Object.keys(e)[0]);const o=e[n];if(!o.buffer)return 1;t.bindBuffer(q,o.buffer);const a=t.getBufferParameter(q,W);var i;t.bindBuffer(q,null);const s=a/((i=o.type)===G||i===$?1:i===X||i===Y?2:i===H||i===Q||i===Z?4:0),u=o.numComponents||o.size,c=s/u;if(c%1!=0)throw new Error(`numComponents ${u} not correct for length ${length}`);return c}(t,o.attribs));return o}function yt(t,e,n){const r="indices"===n?N:q;return nt(t,ut(e,n),r)}function xt(t,e){const n={};return Object.keys(e).forEach((function(r){n[r]=yt(t,e[r],r)})),e.indices?(n.numElements=e.indices.length,n.elementType=z(ut(e.indices))):n.numElements=function(t){let e,n;for(n=0;n<pt.length&&(e=pt[n],!(e in t));++n);n===pt.length&&(e=Object.keys(t)[0]);const r=t[e],o=ot(r).length;if(void 0===o)return 1;const a=st(r,e),i=o/a;if(o%a>0)throw new Error(`numComponents ${a} not correct for length ${o}`);return i}(e),n}var vt=Object.freeze({__proto__:null,createAttribsFromArrays:dt,createBuffersFromArrays:xt,createBufferFromArray:yt,createBufferFromTypedArray:nt,createBufferInfoFromArrays:bt,setAttribInfoBufferFromArray:mt,setAttributePrefix:J,setAttributeDefaults_:tt,getNumComponents_:st,getArray_:ot});const Mt=ot,gt=st;function wt(t,e){let n=0;return t.push=function(){for(let e=0;e<arguments.length;++e){const r=arguments[e];if(r instanceof Array||C(r))for(let e=0;e<r.length;++e)t[n++]=r[e];else t[n++]=r}},t.reset=function(t){n=t||0},t.numComponents=e,Object.defineProperty(t,"numElements",{get:function(){return this.length/this.numComponents|0}}),t}function Pt(t,e,n){return wt(new(n||Float32Array)(t*e),t)}function At(t){return"indices"!==t}function Ft(t,e,n){const r=t.length,o=new Float32Array(3);for(let a=0;a<r;a+=3)n(e,[t[a],t[a+1],t[a+2]],o),t[a]=o[0],t[a+1]=o[1],t[a+2]=o[2]}function _t(t,e,n){n=n||o();const r=e[0],a=e[1],i=e[2];return n[0]=r*t[0]+a*t[1]+i*t[2],n[1]=r*t[4]+a*t[5]+i*t[6],n[2]=r*t[8]+a*t[9]+i*t[10],n}function Et(t,e){return Ft(t,e,v),t}function Tt(t,e){return Ft(t,y(e),_t),t}function zt(t,e){return Ft(t,e,x),t}function St(t,e){return Object.keys(t).forEach((function(n){const r=t[n];n.indexOf("pos")>=0?zt(r,e):n.indexOf("tan")>=0||n.indexOf("binorm")>=0?Et(r,e):n.indexOf("norm")>=0&&Tt(r,e)})),t}function It(t,e,n){return t=t||2,{position:{numComponents:2,data:[(e=e||0)+-1*(t*=.5),(n=n||0)+-1*t,e+1*t,n+-1*t,e+-1*t,n+1*t,e+1*t,n+1*t]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function Ct(t,e,n,r,o){t=t||1,e=e||1,n=n||1,r=r||1,o=o||b();const a=(n+1)*(r+1),i=Pt(3,a),s=Pt(3,a),u=Pt(2,a);for(let o=0;o<=r;o++)for(let a=0;a<=n;a++){const c=a/n,l=o/r;i.push(t*c-.5*t,0,e*l-.5*e),s.push(0,1,0),u.push(c,l)}const c=n+1,l=Pt(3,n*r*2,Uint16Array);for(let t=0;t<r;t++)for(let e=0;e<n;e++)l.push((t+0)*c+e,(t+1)*c+e,(t+0)*c+e+1),l.push((t+1)*c+e,(t+1)*c+e+1,(t+0)*c+e+1);return St({position:i,normal:s,texcoord:u,indices:l},o)}function Bt(t,e,n,r,o,a,i){if(e<=0||n<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");r=r||0,a=a||0;const s=(o=o||Math.PI)-r,u=(i=i||2*Math.PI)-a,c=(e+1)*(n+1),l=Pt(3,c),f=Pt(3,c),h=Pt(2,c);for(let o=0;o<=n;o++)for(let i=0;i<=e;i++){const c=i/e,d=o/n,m=u*c+a,p=s*d+r,b=Math.sin(m),y=Math.cos(m),x=Math.sin(p),v=y*x,M=Math.cos(p),g=b*x;l.push(t*v,t*M,t*g),f.push(v,M,g),h.push(1-c,d)}const d=e+1,m=Pt(3,e*n*2,Uint16Array);for(let t=0;t<e;t++)for(let e=0;e<n;e++)m.push((e+0)*d+t,(e+0)*d+t+1,(e+1)*d+t),m.push((e+1)*d+t,(e+0)*d+t+1,(e+1)*d+t+1);return{position:l,normal:f,texcoord:h,indices:m}}const Ot=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function Rt(t){const e=(t=t||1)/2,n=[[-e,-e,-e],[+e,-e,-e],[-e,+e,-e],[+e,+e,-e],[-e,-e,+e],[+e,-e,+e],[-e,+e,+e],[+e,+e,+e]],r=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],o=[[1,0],[0,0],[0,1],[1,1]],a=Pt(3,24),i=Pt(3,24),s=Pt(2,24),u=Pt(3,12,Uint16Array);for(let t=0;t<6;++t){const e=Ot[t];for(let u=0;u<4;++u){const c=n[e[u]],l=r[t],f=o[u];a.push(c),i.push(l),s.push(f)}const c=4*t;u.push(c+0,c+1,c+2),u.push(c+0,c+2,c+3)}return{position:a,normal:i,texcoord:s,indices:u}}function Dt(t,e,n,r,o,a,i){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(o<1)throw new Error("verticalSubdivisions must be 1 or greater");const s=void 0===a||a,u=void 0===i||i,c=(s?2:0)+(u?2:0),l=(r+1)*(o+1+c),f=Pt(3,l),h=Pt(3,l),d=Pt(2,l),m=Pt(3,r*(o+c/2)*2,Uint16Array),p=r+1,b=Math.atan2(t-e,n),y=Math.cos(b),x=Math.sin(b),v=o+(u?2:0);for(let a=s?-2:0;a<=v;++a){let i,s=a/o,u=n*s;a<0?(u=0,s=1,i=t):a>o?(u=n,s=1,i=e):i=t+a/o*(e-t),-2!==a&&a!==o+2||(i=0,s=0),u-=n/2;for(let t=0;t<p;++t){const e=Math.sin(t*Math.PI*2/r),n=Math.cos(t*Math.PI*2/r);f.push(e*i,u,n*i),a<0?h.push(0,-1,0):a>o?h.push(0,1,0):0===i?h.push(0,0,0):h.push(e*y,x,n*y),d.push(t/r,1-s)}}for(let t=0;t<o+c;++t)if(!(1===t&&s||t===o+c-2&&u))for(let e=0;e<r;++e)m.push(p*(t+0)+0+e,p*(t+0)+1+e,p*(t+1)+1+e),m.push(p*(t+0)+0+e,p*(t+1)+1+e,p*(t+1)+0+e);return{position:f,normal:h,texcoord:d,indices:m}}function kt(t,e){e=e||[];const n=[];for(let r=0;r<t.length;r+=4){const o=t[r],a=t.slice(r+1,r+4);a.push.apply(a,e);for(let t=0;t<o;++t)n.push.apply(n,a)}return n}function Lt(){const t=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],e=kt([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),n=kt([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),r=t.length/3,o={position:Pt(3,r),texcoord:Pt(2,r),normal:Pt(3,r),color:Pt(4,r,Uint8Array),indices:Pt(3,r/3,Uint16Array)};o.position.push(t),o.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),o.normal.push(e),o.color.push(n);for(let t=0;t<r;++t)o.indices.push(t);return o}function jt(t,e,n,r,o,i,s){if(o<=0)throw new Error("subdivisionDown must be > 0");const u=(s=s||1)-(i=i||0),l=2*(o+1)*4,f=Pt(3,l),h=Pt(3,l),d=Pt(2,l);function m(t,e,n){return t+(e-t)*n}function p(e,n,s,l,p,b){for(let y=0;y<=o;y++){const x=n/1,v=y/o,M=2*(x-.5),g=(i+v*u)*Math.PI,w=Math.sin(g),P=Math.cos(g),A=m(t,e,w),F=M*r,_=P*t,E=w*A;f.push(F,_,E);const T=a(c([0,w,P],s),l);h.push(T),d.push(x*p+b,v)}}for(let t=0;t<2;t++){const r=2*(t/1-.5);p(e,t,[1,1,1],[0,0,0],1,0),p(e,t,[0,0,0],[r,0,0],0,0),p(n,t,[1,1,1],[0,0,0],1,0),p(n,t,[0,0,0],[r,0,0],0,1)}const b=Pt(3,2*o*4,Uint16Array);function y(t,e){for(let n=0;n<o;++n)b.push(t+n+0,t+n+1,e+n+0),b.push(t+n+1,e+n+1,e+n+0)}const x=o+1;return y(0*x,4*x),y(5*x,7*x),y(6*x,2*x),y(3*x,1*x),{position:f,normal:h,texcoord:d,indices:b}}function Ut(t,e,n,r,o,a){return Dt(t,t,e,n,r,o,a)}function Vt(t,e,n,r,o,a){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(r<3)throw new Error("verticalSubdivisions must be 3 or greater");o=o||0;const i=(a=a||2*Math.PI)-o,s=n+1,u=r+1,c=s*u,l=Pt(3,c),f=Pt(3,c),h=Pt(2,c),d=Pt(3,n*r*2,Uint16Array);for(let a=0;a<u;++a){const u=a/r,c=u*Math.PI*2,d=Math.sin(c),m=t+d*e,p=Math.cos(c),b=p*e;for(let t=0;t<s;++t){const e=t/n,r=o+e*i,a=Math.sin(r),s=Math.cos(r),c=a*m,y=s*m,x=a*d,v=s*d;l.push(c,b,y),f.push(x,p,v),h.push(e,1-u)}}for(let t=0;t<r;++t)for(let e=0;e<n;++e){const n=1+e,r=1+t;d.push(s*t+e,s*r+e,s*t+n),d.push(s*r+e,s*r+n,s*t+n)}return{position:l,normal:f,texcoord:h,indices:d}}function qt(t,e,n,r,o){if(e<3)throw new Error("divisions must be at least 3");o=o||1,r=r||0;const a=(e+1)*((n=n||1)+1),i=Pt(3,a),s=Pt(3,a),u=Pt(2,a),c=Pt(3,n*e*2,Uint16Array);let l=0;const f=t-r,h=e+1;for(let t=0;t<=n;++t){const a=r+f*Math.pow(t/n,o);for(let r=0;r<=e;++r){const o=2*Math.PI*r/e,f=a*Math.cos(o),d=a*Math.sin(o);if(i.push(f,0,d),s.push(0,1,0),u.push(1-r/e,t/n),t>0&&r!==e){const t=l+(r+1),e=l+r,n=l+r-h,o=l+(r+1)-h;c.push(t,e,n),c.push(t,n,o)}}l+=e+1}return{position:i,normal:s,texcoord:u,indices:c}}function Nt(t){return function(e){return xt(e,t.apply(this,Array.prototype.slice.call(arguments,1)))}}function Wt(t){return function(e){return bt(e,t.apply(null,Array.prototype.slice.call(arguments,1)))}}const Gt=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function $t(t,e,n,r){r=r||0;const o=t.length;for(let a=0;a<o;++a)e[n+a]=t[a]+r}function Xt(t,e){const n=Mt(t),r=new n.constructor(e);let o=r;var a,i;return n.numComponents&&n.numElements&&wt(r,n.numComponents),t.data&&(o={data:r},a=t,i=o,Gt.forEach((function(t){const e=a[t];void 0!==e&&(i[t]=e)}))),o}const Yt=Wt(Lt),Ht=Nt(Lt),Qt=Wt(Rt),Zt=Nt(Rt),Kt=Wt(Ct),Jt=Nt(Ct),te=Wt(Bt),ee=Nt(Bt),ne=Wt(Dt),re=Nt(Dt),oe=Wt(It),ae=Nt(It),ie=Wt(jt),se=Nt(jt),ue=Wt(Ut),ce=Nt(Ut),le=Wt(Vt),fe=Nt(Vt),he=Wt(qt),de=Nt(qt),me=ie,pe=se,be=jt;var ye=Object.freeze({__proto__:null,create3DFBufferInfo:Yt,create3DFBuffers:Ht,create3DFVertices:Lt,createAugmentedTypedArray:Pt,createCubeBufferInfo:Qt,createCubeBuffers:Zt,createCubeVertices:Rt,createPlaneBufferInfo:Kt,createPlaneBuffers:Jt,createPlaneVertices:Ct,createSphereBufferInfo:te,createSphereBuffers:ee,createSphereVertices:Bt,createTruncatedConeBufferInfo:ne,createTruncatedConeBuffers:re,createTruncatedConeVertices:Dt,createXYQuadBufferInfo:oe,createXYQuadBuffers:ae,createXYQuadVertices:It,createCresentBufferInfo:me,createCresentBuffers:pe,createCresentVertices:be,createCrescentBufferInfo:ie,createCrescentBuffers:se,createCrescentVertices:jt,createCylinderBufferInfo:ue,createCylinderBuffers:ce,createCylinderVertices:Ut,createTorusBufferInfo:le,createTorusBuffers:fe,createTorusVertices:Vt,createDiscBufferInfo:he,createDiscBuffers:de,createDiscVertices:qt,deindexVertices:function(t){const e=t.indices,n={},r=e.length;return Object.keys(t).filter(At).forEach((function(o){const a=t[o],i=a.numComponents,s=Pt(i,r,a.constructor);for(let t=0;t<r;++t){const n=e[t]*i;for(let t=0;t<i;++t)s.push(a[n+t])}n[o]=s})),n},flattenNormals:function(t){if(t.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");const e=t.normal,n=e.length;for(let t=0;t<n;t+=9){const n=e[t+0],r=e[t+1],o=e[t+2],a=e[t+3],i=e[t+4],s=e[t+5];let u=n+a+e[t+6],c=r+i+e[t+7],l=o+s+e[t+8];const f=Math.sqrt(u*u+c*c+l*l);u/=f,c/=f,l/=f,e[t+0]=u,e[t+1]=c,e[t+2]=l,e[t+3]=u,e[t+4]=c,e[t+5]=l,e[t+6]=u,e[t+7]=c,e[t+8]=l}return t},makeRandomVertexColors:function(t,e){e=e||{};const n=t.position.numElements,r=Pt(4,n,Uint8Array),o=e.rand||function(t,e){return e<3?(256,256*Math.random()|0):255};if(t.color=r,t.indices)for(let t=0;t<n;++t)r.push(o(t,0),o(t,1),o(t,2),o(t,3));else{const t=e.vertsPerColor||3,a=n/t;for(let e=0;e<a;++e){const n=[o(e,0),o(e,1),o(e,2),o(e,3)];for(let e=0;e<t;++e)r.push(n)}}return t},reorientDirections:Et,reorientNormals:Tt,reorientPositions:zt,reorientVertices:St,concatVertices:function(t){const e={};let n;for(let r=0;r<t.length;++r){const o=t[r];Object.keys(o).forEach((function(t){e[t]||(e[t]=[]),n||"indices"===t||(n=t);const r=o[t],a=gt(r,t),i=Mt(r).length/a;e[t].push(i)}))}const r=e[n],o={};return Object.keys(e).forEach((function(e){const n=function(e){let n,r=0;for(let o=0;o<t.length;++o){const a=t[o][e];r+=Mt(a).length,n&&!a.data||(n=a)}return{length:r,spec:n}}(e),a=Xt(n.spec,n.length);!function(e,n,r){let o=0,a=0;for(let i=0;i<t.length;++i){const s=t[i][e],u=Mt(s);"indices"===e?($t(u,r,a,o),o+=n[i]):$t(u,r,a),a+=u.length}}(e,r,Mt(a)),o[e]=a})),o},duplicateVertices:function(t){const e={};return Object.keys(t).forEach((function(n){const r=t[n],o=Mt(r),a=Xt(r,o.length);$t(o,Mt(a),0),e[n]=a})),e}});function xe(t){return!!t.texStorage2D}function ve(t){return!t.texStorage2D}const Me=function(){const t={},e={};return function(n,r){return function(n){const r=n.constructor.name;if(!t[r]){for(const t in n)if("number"==typeof n[t]){const r=e[n[t]];e[n[t]]=r?`${r} | ${t}`:t}t[r]=!0}}(n),e[r]||("number"==typeof r?`0x${r.toString(16)}`:r)}}();var ge=Object.freeze({__proto__:null,glEnumToString:Me,isWebGL1:ve,isWebGL2:xe});const we={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},Pe=C,Ae=function(){let t;return function(){return t=t||("undefined"!=typeof document&&document.createElement?document.createElement("canvas").getContext("2d"):null),t}}(),Fe=6406,_e=6407,Ee=6408,Te=6409,ze=6410,Se=6402,Ie=34041,Ce=33071,Be=9728,Oe=9729,Re=3553,De=34067,ke=32879,Le=35866,je=34069,Ue=34070,Ve=34071,qe=34072,Ne=34073,We=34074,Ge=10241,$e=10240,Xe=10242,Ye=10243,He=32882,Qe=33082,Ze=33083,Ke=33084,Je=33085,tn=34892,en=34893,nn=3317,rn=3314,on=32878,an=3316,sn=3315,un=32877,cn=37443,ln=37441,fn=37440,hn=33321,dn=36756,mn=33325,pn=33326,bn=33330,yn=33329,xn=33338,vn=33337,Mn=33340,gn=33339,wn=33323,Pn=36757,An=33327,Fn=33328,_n=33336,En=33335,Tn=33332,zn=33331,Sn=33334,In=33333,Cn=32849,Bn=35905,On=36194,Rn=36758,Dn=35898,kn=35901,Ln=34843,jn=34837,Un=36221,Vn=36239,qn=36215,Nn=36233,Wn=36209,Gn=36227,$n=32856,Xn=35907,Yn=36759,Hn=32855,Qn=32854,Zn=32857,Kn=34842,Jn=34836,tr=36220,er=36238,nr=36975,rr=36214,or=36232,ar=36226,ir=36208,sr=33189,ur=33190,cr=36012,lr=36013,fr=35056,hr=5120,dr=5121,mr=5122,pr=5123,br=5124,yr=5125,xr=5126,vr=32819,Mr=32820,gr=33635,wr=5131,Pr=36193,Ar=33640,Fr=35899,_r=35902,Er=36269,Tr=34042,zr=33319,Sr=33320,Ir=6403,Cr=36244,Br=36248,Or=36249,Rr={};{const t=Rr;t[Fe]={numColorComponents:1},t[Te]={numColorComponents:1},t[ze]={numColorComponents:2},t[_e]={numColorComponents:3},t[Ee]={numColorComponents:4},t[Ir]={numColorComponents:1},t[Cr]={numColorComponents:1},t[zr]={numColorComponents:2},t[Sr]={numColorComponents:2},t[_e]={numColorComponents:3},t[Br]={numColorComponents:3},t[Ee]={numColorComponents:4},t[Or]={numColorComponents:4},t[Se]={numColorComponents:1},t[Ie]={numColorComponents:2}}let Dr;function kr(t){if(!Dr){const t={};t[Fe]={textureFormat:Fe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[dr,wr,Pr,xr]},t[Te]={textureFormat:Te,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[dr,wr,Pr,xr]},t[ze]={textureFormat:ze,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[dr,wr,Pr,xr]},t[_e]={textureFormat:_e,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[dr,wr,Pr,xr,gr]},t[Ee]={textureFormat:Ee,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[dr,wr,Pr,xr,vr,Mr]},t[Se]={textureFormat:Se,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[yr,pr]},t[hn]={textureFormat:Ir,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[dr]},t[dn]={textureFormat:Ir,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[hr]},t[mn]={textureFormat:Ir,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[xr,wr]},t[pn]={textureFormat:Ir,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[xr]},t[bn]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[dr]},t[yn]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[hr]},t[Tn]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[pr]},t[zn]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[mr]},t[Sn]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[yr]},t[In]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[br]},t[wn]={textureFormat:zr,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[dr]},t[Pn]={textureFormat:zr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[hr]},t[An]={textureFormat:zr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[xr,wr]},t[Fn]={textureFormat:zr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[xr]},t[_n]={textureFormat:Sr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[dr]},t[En]={textureFormat:Sr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[hr]},t[xn]={textureFormat:Sr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[pr]},t[vn]={textureFormat:Sr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[mr]},t[Mn]={textureFormat:Sr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[yr]},t[gn]={textureFormat:Sr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[br]},t[Cn]={textureFormat:_e,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[dr]},t[Bn]={textureFormat:_e,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[dr]},t[On]={textureFormat:_e,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[dr,gr]},t[Rn]={textureFormat:_e,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[hr]},t[Dn]={textureFormat:_e,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[xr,wr,Fr]},t[kn]={textureFormat:_e,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[xr,wr,_r]},t[Ln]={textureFormat:_e,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[xr,wr]},t[jn]={textureFormat:_e,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[xr]},t[Un]={textureFormat:Br,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[dr]},t[Vn]={textureFormat:Br,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[hr]},t[qn]={textureFormat:Br,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[pr]},t[Nn]={textureFormat:Br,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[mr]},t[Wn]={textureFormat:Br,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[yr]},t[Gn]={textureFormat:Br,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[br]},t[$n]={textureFormat:Ee,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[dr]},t[Xn]={textureFormat:Ee,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[dr]},t[Yn]={textureFormat:Ee,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[hr]},t[Hn]={textureFormat:Ee,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[dr,Mr,Ar]},t[Qn]={textureFormat:Ee,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[dr,vr]},t[Zn]={textureFormat:Ee,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Ar]},t[Kn]={textureFormat:Ee,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[xr,wr]},t[Jn]={textureFormat:Ee,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[xr]},t[tr]={textureFormat:Or,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[dr]},t[er]={textureFormat:Or,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[hr]},t[nr]={textureFormat:Or,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ar]},t[rr]={textureFormat:Or,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[pr]},t[or]={textureFormat:Or,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[mr]},t[ar]={textureFormat:Or,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[br]},t[ir]={textureFormat:Or,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[yr]},t[sr]={textureFormat:Se,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[pr,yr]},t[ur]={textureFormat:Se,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[yr]},t[cr]={textureFormat:Se,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[xr]},t[fr]={textureFormat:Ie,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Tr]},t[lr]={textureFormat:Ie,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Er]},Object.keys(t).forEach((function(e){const n=t[e];n.bytesPerElementMap={},n.bytesPerElement.forEach((function(t,e){const r=n.type[e];n.bytesPerElementMap[r]=t}))})),Dr=t}return Dr[t]}function Lr(t,e){const n=kr(t);if(!n)throw"unknown internal format";const r=n.bytesPerElementMap[e];if(void 0===r)throw"unknown internal format";return r}function jr(t){const e=kr(t);if(!e)throw"unknown internal format";return{format:e.textureFormat,type:e.type[0]}}function Ur(t){return!(t&t-1)}function Vr(t,e,n,r){if(!xe(t))return Ur(e)&&Ur(n);const o=kr(r);if(!o)throw"unknown internal format";return o.colorRenderable&&o.textureFilterable}function qr(t){const e=kr(t);if(!e)throw"unknown internal format";return e.textureFilterable}function Nr(t){const e=Rr[t];if(!e)throw"unknown format: "+t;return e.numColorComponents}function Wr(t,e,n){return Pe(e)?z(e):n||dr}function Gr(t,e,n,r,o){if(o%1!=0)throw"can't guess dimensions";if(n||r){if(r){if(!n&&(n=o/r)%1)throw"can't guess dimensions"}else if((r=o/n)%1)throw"can't guess dimensions"}else{const t=Math.sqrt(o/(e===De?6:1));t%1==0?(n=t,r=t):(n=o,r=1)}return{width:n,height:r}}function $r(t){we.textureColor=new Uint8Array([255*t[0],255*t[1],255*t[2],255*t[3]])}function Xr(t){O(t,we),t.textureColor&&$r(t.textureColor)}function Yr(t,e){void 0!==e.colorspaceConversion&&t.pixelStorei(cn,e.colorspaceConversion),void 0!==e.premultiplyAlpha&&t.pixelStorei(ln,e.premultiplyAlpha),void 0!==e.flipY&&t.pixelStorei(fn,e.flipY)}function Hr(t){t.pixelStorei(nn,4),xe(t)&&(t.pixelStorei(rn,0),t.pixelStorei(on,0),t.pixelStorei(an,0),t.pixelStorei(sn,0),t.pixelStorei(un,0))}function Qr(t,e,n,r){r.minMag&&(n.call(t,e,Ge,r.minMag),n.call(t,e,$e,r.minMag)),r.min&&n.call(t,e,Ge,r.min),r.mag&&n.call(t,e,$e,r.mag),r.wrap&&(n.call(t,e,Xe,r.wrap),n.call(t,e,Ye,r.wrap),(e===ke||"undefined"!=typeof WebGLSampler&&L(e,"WebGLSampler"))&&n.call(t,e,He,r.wrap)),r.wrapR&&n.call(t,e,He,r.wrapR),r.wrapS&&n.call(t,e,Xe,r.wrapS),r.wrapT&&n.call(t,e,Ye,r.wrapT),void 0!==r.minLod&&n.call(t,e,Qe,r.minLod),void 0!==r.maxLod&&n.call(t,e,Ze,r.maxLod),void 0!==r.baseLevel&&n.call(t,e,Ke,r.baseLevel),void 0!==r.maxLevel&&n.call(t,e,Je,r.maxLevel),void 0!==r.compareFunc&&n.call(t,e,en,r.compareFunc),void 0!==r.compareMode&&n.call(t,e,tn,r.compareMode)}function Zr(t,e,n){const r=n.target||Re;t.bindTexture(r,e),Qr(t,r,t.texParameteri,n)}function Kr(t,e,n){Qr(t,e,t.samplerParameteri,n)}function Jr(t,e){const n=t.createSampler();return Kr(t,n,e),n}function to(t,e){const n={};return Object.keys(e).forEach((function(r){n[r]=Jr(t,e[r])})),n}function eo(t,e,n,r,o,a){n=n||we.textureOptions,a=a||Ee;const i=n.target||Re;if(r=r||n.width,o=o||n.height,t.bindTexture(i,e),Vr(t,r,o,a))t.generateMipmap(i);else{const e=qr(a)?Oe:Be;t.texParameteri(i,Ge,e),t.texParameteri(i,$e,e),t.texParameteri(i,Xe,Ce),t.texParameteri(i,Ye,Ce)}}function no(t){return!0===t.auto||void 0===t.auto&&void 0===t.level}function ro(t,e){return(e=e||{}).cubeFaceOrder||[je,Ue,Ve,qe,Ne,We]}function oo(t,e){const n=ro(0,e).map((function(t,e){return{face:t,ndx:e}}));return n.sort((function(t,e){return t.face-e.face})),n}function ao(t,e,n,r){const o=(r=r||we.textureOptions).target||Re,a=r.level||0;let i=n.width,s=n.height;const u=r.internalFormat||r.format||Ee,c=jr(u),l=r.format||c.format,f=r.type||c.type;if(Yr(t,r),t.bindTexture(o,e),o===De){const c=n.width,h=n.height;let d,m;if(c/6===h)d=h,m=[0,0,1,0,2,0,3,0,4,0,5,0];else if(h/6===c)d=c,m=[0,0,0,1,0,2,0,3,0,4,0,5];else if(c/3==h/2)d=c/3,m=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(c/2!=h/3)throw"can't figure out cube map from element: "+(n.src?n.src:n.nodeName);d=c/2,m=[0,0,1,0,0,1,1,1,0,2,1,2]}const p=Ae();p?(p.canvas.width=d,p.canvas.height=d,i=d,s=d,oo(0,r).forEach((function(e){const r=m[2*e.ndx+0]*d,o=m[2*e.ndx+1]*d;p.drawImage(n,r,o,d,d,0,0,d,d),t.texImage2D(e.face,a,u,l,f,p.canvas)})),p.canvas.width=1,p.canvas.height=1):"undefined"!=typeof createImageBitmap&&(i=d,s=d,oo(0,r).forEach((function(c){const h=m[2*c.ndx+0]*d,p=m[2*c.ndx+1]*d;t.texImage2D(c.face,a,u,d,d,0,l,f,null),createImageBitmap(n,h,p,d,d,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then((function(n){Yr(t,r),t.bindTexture(o,e),t.texImage2D(c.face,a,u,l,f,n),no(r)&&eo(t,e,r,i,s,u)}))})))}else if(o===ke||o===Le){const e=Math.min(n.width,n.height),r=Math.max(n.width,n.height),i=r/e;if(i%1!=0)throw"can not compute 3D dimensions of element";const s=n.width===r?1:0,c=n.height===r?1:0;t.pixelStorei(nn,1),t.pixelStorei(rn,n.width),t.pixelStorei(on,0),t.pixelStorei(un,0),t.texImage3D(o,a,u,e,e,e,0,l,f,null);for(let r=0;r<i;++r){const i=r*e*s,u=r*e*c;t.pixelStorei(an,i),t.pixelStorei(sn,u),t.texSubImage3D(o,a,0,0,r,e,e,1,l,f,n)}Hr(t)}else t.texImage2D(o,a,u,l,f,n);no(r)&&eo(t,e,r,i,s,u),Zr(t,e,r)}function io(){}function so(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof ImageData&&t instanceof ImageData||"undefined"!=typeof HTMLElement&&t instanceof HTMLElement}function uo(t,e,n){return so(t)?(setTimeout((function(){n(null,t)})),t):function(t,e,n){let r;if(n=n||io,e=void 0!==e?e:we.crossOrigin,e=function(t,e){return void 0!==e||function(t){if("undefined"!=typeof document){const e=document.createElement("a");return e.href=t,e.hostname===location.hostname&&e.port===location.port&&e.protocol===location.protocol}{const e=new URL(location.href).origin;return new URL(t,location.href).origin===e}}(t)?e:"anonymous"}(t,e),"undefined"!=typeof Image){r=new Image,void 0!==e&&(r.crossOrigin=e);const o=function(){r.removeEventListener("error",a),r.removeEventListener("load",i),r=null},a=function(){const e="couldn't load image: "+t;R(e),n(e,r),o()},i=function(){n(null,r),o()};return r.addEventListener("error",a),r.addEventListener("load",i),r.src=t,r}if("undefined"!=typeof ImageBitmap){let o,a;const i=function(){n(o,a)},s={};e&&(s.mode="cors"),fetch(t,s).then((function(t){if(!t.ok)throw t;return t.blob()})).then((function(t){return createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(t){a=t,setTimeout(i)})).catch((function(t){o=t,setTimeout(i)})),r=null}return r}(t,e,n)}function co(t,e,n){const r=(n=n||we.textureOptions).target||Re;if(t.bindTexture(r,e),!1===n.color)return;const o=function(t){return t=t||we.textureColor,Pe(t)?t:new Uint8Array([255*t[0],255*t[1],255*t[2],255*t[3]])}(n.color);if(r===De)for(let e=0;e<6;++e)t.texImage2D(je+e,0,Ee,1,1,0,Ee,dr,o);else r===ke||r===Le?t.texImage3D(r,0,Ee,1,1,1,0,Ee,dr,o):t.texImage2D(r,0,Ee,1,1,0,Ee,dr,o)}function lo(t,e,n,r){return r=r||io,n=n||we.textureOptions,co(t,e,n),uo((n=Object.assign({},n)).src,n.crossOrigin,(function(o,a){o?r(o,e,a):(ao(t,e,a,n),r(null,e,a))}))}function fo(t,e,n,r){const o=(r=r||we.textureOptions).target||Re;t.bindTexture(o,e);let a=r.width,i=r.height,s=r.depth;const u=r.level||0,c=r.internalFormat||r.format||Ee,l=jr(c),f=r.format||l.format,h=r.type||Wr(0,n,l.type);if(Pe(n))n instanceof Uint8ClampedArray&&(n=new Uint8Array(n.buffer));else{const t=I(h);n=new t(n)}const d=Lr(c,h),m=n.byteLength/d;if(m%1)throw"length wrong size for format: "+Me(t,f);let p;if(o===ke||o===Le)if(a||i||s)!a||i&&s?!i||a&&s?(p=Gr(0,o,a,i,m/s),a=p.width,i=p.height):(p=Gr(0,o,a,s,m/i),a=p.width,s=p.height):(p=Gr(0,o,i,s,m/a),i=p.width,s=p.height);else{const t=Math.cbrt(m);if(t%1!=0)throw"can't guess cube size of array of numElements: "+m;a=t,i=t,s=t}else p=Gr(0,o,a,i,m),a=p.width,i=p.height;if(Hr(t),t.pixelStorei(nn,r.unpackAlignment||1),Yr(t,r),o===De){const e=m/6*(d/n.BYTES_PER_ELEMENT);oo(0,r).forEach((r=>{const o=e*r.ndx,s=n.subarray(o,o+e);t.texImage2D(r.face,u,c,a,i,0,f,h,s)}))}else o===ke||o===Le?t.texImage3D(o,u,c,a,i,s,0,f,h,n):t.texImage2D(o,u,c,a,i,0,f,h,n);return{width:a,height:i,depth:s,type:h}}function ho(t,e,n){const r=n.target||Re;t.bindTexture(r,e);const o=n.level||0,a=n.internalFormat||n.format||Ee,i=jr(a),s=n.format||i.format,u=n.type||i.type;if(Yr(t,n),r===De)for(let e=0;e<6;++e)t.texImage2D(je+e,o,a,n.width,n.height,0,s,u,null);else r===ke||r===Le?t.texImage3D(r,o,a,n.width,n.height,n.depth,0,s,u,null):t.texImage2D(r,o,a,n.width,n.height,0,s,u,null)}function mo(t,e,n){n=n||io,e=e||we.textureOptions;const r=t.createTexture(),o=e.target||Re;let a=e.width||1,i=e.height||1;const s=e.internalFormat||Ee;t.bindTexture(o,r),o===De&&(t.texParameteri(o,Xe,Ce),t.texParameteri(o,Ye,Ce));let u=e.src;if(u)if("function"==typeof u&&(u=u(t,e)),"string"==typeof u)lo(t,r,e,n);else if(Pe(u)||Array.isArray(u)&&("number"==typeof u[0]||Array.isArray(u[0])||Pe(u[0]))){const n=fo(t,r,u,e);a=n.width,i=n.height}else Array.isArray(u)&&("string"==typeof u[0]||so(u[0]))?o===De?function(t,e,n,r){r=r||io;const o=n.src;if(6!==o.length)throw"there must be 6 urls for a cubemap";const a=n.level||0,i=n.internalFormat||n.format||Ee,s=jr(i),u=n.format||s.format,c=n.type||dr,l=n.target||Re;if(l!==De)throw"target must be TEXTURE_CUBE_MAP";co(t,e,n),n=Object.assign({},n);let f=6;const h=[],d=ro(0,n);let m;m=o.map((function(o,s){return uo(o,n.crossOrigin,(p=d[s],function(o,s){--f,o?h.push(o):s.width!==s.height?h.push("cubemap face img is not a square: "+s.src):(Yr(t,n),t.bindTexture(l,e),5===f?ro().forEach((function(e){t.texImage2D(e,a,i,u,c,s)})):t.texImage2D(p,a,i,u,c,s),no(n)&&t.generateMipmap(l)),0===f&&r(h.length?h:void 0,e,m)}));var p}))}(t,r,e,n):function(t,e,n,r){r=r||io;const o=n.src,a=n.internalFormat||n.format||Ee,i=jr(a),s=n.format||i.format,u=n.type||dr,c=n.target||Le;if(c!==ke&&c!==Le)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";co(t,e,n),n=Object.assign({},n);let l=o.length;const f=[];let h;const d=n.level||0;let m=n.width,p=n.height;const b=o.length;let y=!0;h=o.map((function(o,i){return uo(o,n.crossOrigin,(x=i,function(o,i){if(--l,o)f.push(o);else{if(Yr(t,n),t.bindTexture(c,e),y){y=!1,m=n.width||i.width,p=n.height||i.height,t.texImage3D(c,d,a,m,p,b,0,s,u,null);for(let e=0;e<b;++e)t.texSubImage3D(c,d,0,0,e,m,p,1,s,u,i)}else{let e,n=i;i.width===m&&i.height===p||(e=Ae(),n=e.canvas,e.canvas.width=m,e.canvas.height=p,e.drawImage(i,0,0,m,p)),t.texSubImage3D(c,d,0,0,x,m,p,1,s,u,n),e&&n===e.canvas&&(e.canvas.width=0,e.canvas.height=0)}no(n)&&t.generateMipmap(c)}0===l&&r(f.length?f:void 0,e,h)}));var x}))}(t,r,e,n):(ao(t,r,u,e),a=u.width,i=u.height);else ho(t,r,e);return no(e)&&eo(t,r,e,a,i,s),Zr(t,r,e),r}function po(t,e,n,r,o,a){r=r||n.width,o=o||n.height,a=a||n.depth;const i=n.target||Re;t.bindTexture(i,e);const s=n.level||0,u=n.internalFormat||n.format||Ee,c=jr(u),l=n.format||c.format;let f;const h=n.src;if(f=h&&(Pe(h)||Array.isArray(h)&&"number"==typeof h[0])?n.type||Wr(0,h,c.type):n.type||c.type,i===De)for(let e=0;e<6;++e)t.texImage2D(je+e,s,u,r,o,0,l,f,null);else i===ke||i===Le?t.texImage3D(i,s,u,r,o,a,0,l,f,null):t.texImage2D(i,s,u,r,o,0,l,f,null)}function bo(t,e,n){n=n||io;let r=0;const o=[],a={},i={};function s(){0===r&&setTimeout((function(){n(o.length?o:void 0,a,i)}),0)}return Object.keys(e).forEach((function(n){const u=e[n];let c;var l;("string"==typeof(l=u.src)||Array.isArray(l)&&"string"==typeof l[0])&&(c=function(t,e,a){i[n]=a,--r,t&&o.push(t),s()},++r),a[n]=mo(t,u,c)})),s(),a}var yo=Object.freeze({__proto__:null,setTextureDefaults_:Xr,createSampler:Jr,createSamplers:to,setSamplerParameters:Kr,createTexture:mo,setEmptyTexture:ho,setTextureFromArray:fo,loadTextureFromUrl:lo,setTextureFromElement:ao,setTextureFilteringForSize:eo,setTextureParameters:Zr,setDefaultTextureColor:$r,createTextures:bo,resizeTexture:po,canGenerateMipmap:Vr,canFilter:qr,getNumComponentsForFormat:Nr,getBytesPerElementForInternalFormat:Lr,getFormatAndTypeForInternalFormat:jr});const xo=R,vo=D;function Mo(t){return"undefined"!=typeof document&&document.getElementById?document.getElementById(t):null}const go=33984,wo=35048,Po=34962,Ao=34963,Fo=35345,_o=35982,Eo=36386,To=35713,zo=35714,So=35632,Io=35633,Co=35981,Bo=35718,Oo=35721,Ro=35971,Do=35382,ko=35396,Lo=35398,jo=35392,Uo=35395,Vo=5124,qo=3553,No=34067,Wo=32879,Go=35866,$o={};function Xo(t,e){return $o[e].bindPoint}function Yo(t,e){return function(n){t.uniform1i(e,n)}}function Ho(t,e){return function(n){t.uniform1iv(e,n)}}function Qo(t,e){return function(n){t.uniform2iv(e,n)}}function Zo(t,e){return function(n){t.uniform3iv(e,n)}}function Ko(t,e){return function(n){t.uniform4iv(e,n)}}function Jo(t,e,n,r){const o=Xo(0,e);return xe(t)?function(e){let a,i;!e||U(0,e)?(a=e,i=null):(a=e.texture,i=e.sampler),t.uniform1i(r,n),t.activeTexture(go+n),t.bindTexture(o,a),t.bindSampler(n,i)}:function(e){t.uniform1i(r,n),t.activeTexture(go+n),t.bindTexture(o,e)}}function ta(t,e,n,r,o){const a=Xo(0,e),i=new Int32Array(o);for(let t=0;t<o;++t)i[t]=n+t;return xe(t)?function(e){t.uniform1iv(r,i),e.forEach((function(e,r){let o,s;t.activeTexture(go+i[r]),!e||U(0,e)?(o=e,s=null):(o=e.texture,s=e.sampler),t.bindSampler(n,s),t.bindTexture(a,o)}))}:function(e){t.uniform1iv(r,i),e.forEach((function(e,n){t.activeTexture(go+i[n]),t.bindTexture(a,e)}))}}function ea(t,e){return function(n){if(n.value)switch(t.disableVertexAttribArray(e),n.value.length){case 4:t.vertexAttrib4fv(e,n.value);break;case 3:t.vertexAttrib3fv(e,n.value);break;case 2:t.vertexAttrib2fv(e,n.value);break;case 1:t.vertexAttrib1fv(e,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else t.bindBuffer(Po,n.buffer),t.enableVertexAttribArray(e),t.vertexAttribPointer(e,n.numComponents||n.size,n.type||5126,n.normalize||!1,n.stride||0,n.offset||0),t.vertexAttribDivisor&&t.vertexAttribDivisor(e,n.divisor||0)}}function na(t,e){return function(n){if(n.value){if(t.disableVertexAttribArray(e),4!==n.value.length)throw new Error("The length of an integer constant value must be 4!");t.vertexAttrib4iv(e,n.value)}else t.bindBuffer(Po,n.buffer),t.enableVertexAttribArray(e),t.vertexAttribIPointer(e,n.numComponents||n.size,n.type||Vo,n.stride||0,n.offset||0),t.vertexAttribDivisor&&t.vertexAttribDivisor(e,n.divisor||0)}}function ra(t,e){return function(n){if(n.value){if(t.disableVertexAttribArray(e),4!==n.value.length)throw new Error("The length of an unsigned integer constant value must be 4!");t.vertexAttrib4uiv(e,n.value)}else t.bindBuffer(Po,n.buffer),t.enableVertexAttribArray(e),t.vertexAttribIPointer(e,n.numComponents||n.size,n.type||5125,n.stride||0,n.offset||0),t.vertexAttribDivisor&&t.vertexAttribDivisor(e,n.divisor||0)}}function oa(t,e,n){const r=n.size,o=n.count;return function(n){t.bindBuffer(Po,n.buffer);const a=n.size||n.numComponents||r,i=a/o,s=n.type||5126,u=$o[s].size*a,c=n.normalize||!1,l=n.offset||0,f=u/o;for(let r=0;r<o;++r)t.enableVertexAttribArray(e+r),t.vertexAttribPointer(e+r,i,s,c,u,l+f*r),t.vertexAttribDivisor&&t.vertexAttribDivisor(e+r,n.divisor||0)}}$o[5126]={Type:Float32Array,size:4,setter:function(t,e){return function(n){t.uniform1f(e,n)}},arraySetter:function(t,e){return function(n){t.uniform1fv(e,n)}}},$o[35664]={Type:Float32Array,size:8,setter:function(t,e){return function(n){t.uniform2fv(e,n)}},cols:2},$o[35665]={Type:Float32Array,size:12,setter:function(t,e){return function(n){t.uniform3fv(e,n)}},cols:3},$o[35666]={Type:Float32Array,size:16,setter:function(t,e){return function(n){t.uniform4fv(e,n)}},cols:4},$o[Vo]={Type:Int32Array,size:4,setter:Yo,arraySetter:Ho},$o[35667]={Type:Int32Array,size:8,setter:Qo,cols:2},$o[35668]={Type:Int32Array,size:12,setter:Zo,cols:3},$o[35669]={Type:Int32Array,size:16,setter:Ko,cols:4},$o[5125]={Type:Uint32Array,size:4,setter:function(t,e){return function(n){t.uniform1ui(e,n)}},arraySetter:function(t,e){return function(n){t.uniform1uiv(e,n)}}},$o[36294]={Type:Uint32Array,size:8,setter:function(t,e){return function(n){t.uniform2uiv(e,n)}},cols:2},$o[36295]={Type:Uint32Array,size:12,setter:function(t,e){return function(n){t.uniform3uiv(e,n)}},cols:3},$o[36296]={Type:Uint32Array,size:16,setter:function(t,e){return function(n){t.uniform4uiv(e,n)}},cols:4},$o[35670]={Type:Uint32Array,size:4,setter:Yo,arraySetter:Ho},$o[35671]={Type:Uint32Array,size:8,setter:Qo,cols:2},$o[35672]={Type:Uint32Array,size:12,setter:Zo,cols:3},$o[35673]={Type:Uint32Array,size:16,setter:Ko,cols:4},$o[35674]={Type:Float32Array,size:32,setter:function(t,e){return function(n){t.uniformMatrix2fv(e,!1,n)}},rows:2,cols:2},$o[35675]={Type:Float32Array,size:48,setter:function(t,e){return function(n){t.uniformMatrix3fv(e,!1,n)}},rows:3,cols:3},$o[35676]={Type:Float32Array,size:64,setter:function(t,e){return function(n){t.uniformMatrix4fv(e,!1,n)}},rows:4,cols:4},$o[35685]={Type:Float32Array,size:32,setter:function(t,e){return function(n){t.uniformMatrix2x3fv(e,!1,n)}},rows:2,cols:3},$o[35686]={Type:Float32Array,size:32,setter:function(t,e){return function(n){t.uniformMatrix2x4fv(e,!1,n)}},rows:2,cols:4},$o[35687]={Type:Float32Array,size:48,setter:function(t,e){return function(n){t.uniformMatrix3x2fv(e,!1,n)}},rows:3,cols:2},$o[35688]={Type:Float32Array,size:48,setter:function(t,e){return function(n){t.uniformMatrix3x4fv(e,!1,n)}},rows:3,cols:4},$o[35689]={Type:Float32Array,size:64,setter:function(t,e){return function(n){t.uniformMatrix4x2fv(e,!1,n)}},rows:4,cols:2},$o[35690]={Type:Float32Array,size:64,setter:function(t,e){return function(n){t.uniformMatrix4x3fv(e,!1,n)}},rows:4,cols:3},$o[35678]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:qo},$o[35680]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:No},$o[35679]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:Wo},$o[35682]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:qo},$o[36289]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:Go},$o[36292]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:Go},$o[36293]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:No},$o[36298]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:qo},$o[36299]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:Wo},$o[36300]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:No},$o[36303]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:Go},$o[36306]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:qo},$o[36307]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:Wo},$o[36308]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:No},$o[36311]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:Go};const aa={};aa[5126]={size:4,setter:ea},aa[35664]={size:8,setter:ea},aa[35665]={size:12,setter:ea},aa[35666]={size:16,setter:ea},aa[Vo]={size:4,setter:na},aa[35667]={size:8,setter:na},aa[35668]={size:12,setter:na},aa[35669]={size:16,setter:na},aa[5125]={size:4,setter:ra},aa[36294]={size:8,setter:ra},aa[36295]={size:12,setter:ra},aa[36296]={size:16,setter:ra},aa[35670]={size:4,setter:na},aa[35671]={size:8,setter:na},aa[35672]={size:12,setter:na},aa[35673]={size:16,setter:na},aa[35674]={size:4,setter:oa,count:2},aa[35675]={size:9,setter:oa,count:3},aa[35676]={size:16,setter:oa,count:4};const ia=/ERROR:\s*\d+:(\d+)/gi,sa=/^[ \t]*\n/;function ua(t){let e=0;return sa.test(t)&&(e=1,t=t.replace(sa,"")),{lineOffset:e,shaderSource:t}}function ca(t,e){return t.errorCallback(e),t.callback&&setTimeout((()=>{t.callback(`${e}\n${t.errors.join("\n")}`)})),null}function la(t,e,n){let r,o,a;if("function"==typeof e&&(n=e,e=void 0),"function"==typeof t)n=t,t=void 0;else if(t&&!Array.isArray(t)){const e=t;n=e.errorCallback,t=e.attribLocations,r=e.transformFeedbackVaryings,o=e.transformFeedbackMode,a=e.callback}const i=n||xo,s=[],u={errorCallback(t,...e){s.push(t),i(t,...e)},transformFeedbackVaryings:r,transformFeedbackMode:o,callback:a,errors:s};{let n={};Array.isArray(t)?t.forEach((function(t,r){n[t]=e?e[r]:r})):n=t||{},u.attribLocations=n}return u}const fa=["VERTEX_SHADER","FRAGMENT_SHADER"],ha=(t=0)=>new Promise((e=>setTimeout(e,t)));function da(t,e,n){const r=t.createProgram(),{attribLocations:o,transformFeedbackVaryings:a,transformFeedbackMode:i}=la(n);for(let n=0;n<e.length;++n){let o=e[n];if("string"==typeof o){const e=Mo(o),a=e?e.text:o;let i=t[fa[n]];e&&e.type&&(i=((s=e.type).indexOf("frag")>=0?So:s.indexOf("vert")>=0?Io:void 0)||i),o=t.createShader(i),t.shaderSource(o,ua(a).shaderSource),t.compileShader(o),t.attachShader(r,o)}}var s;Object.entries(o).forEach((([e,n])=>t.bindAttribLocation(r,n,e)));{let e=a;e&&(e.attribs&&(e=e.attribs),Array.isArray(e)||(e=Object.keys(e)),t.transformFeedbackVaryings(r,e,i||Co))}return t.linkProgram(r),r}function ma(t,e,n,r,o){const a=la(n,r,o),i=new Set(e),s=da(t,e,a);function u(t,e){const n=va(t,e,a.errorCallback);return n&&function(t,e,n){const r=t.getAttachedShaders(e);for(const e of r)n.has(e)&&t.deleteShader(e);t.deleteProgram(e)}(t,e,i),n}if(!a.callback)return u(t,s)?void 0:s;xa(t,s).then((()=>{const e=u(t,s);a.callback(e,e?void 0:s)}))}function pa(t){return function(e,n,...r){return new Promise(((o,a)=>{const i=la(...r);i.callback=(t,e)=>{t?a(t):o(e)},t(e,n,i)}))}}const ba=pa(ma),ya=pa($a);async function xa(t,e){const n=t.getExtension("KHR_parallel_shader_compile"),r=n?(t,e)=>t.getProgramParameter(e,n.COMPLETION_STATUS_KHR):()=>!0;let o=0;do{await ha(o),o=1e3/60}while(!r(t,e))}function va(t,e,n){if(n=n||xo,!t.getProgramParameter(e,zo)){const r=t.getProgramInfoLog(e);return n(`Error in program linking: ${r}`),`${r}\n${t.getAttachedShaders(e).map((e=>function(t,e,n,r){if(r=r||xo,!t.getShaderParameter(n,To)){const o=t.getShaderInfoLog(n),{lineOffset:a,shaderSource:i}=ua(t.getShaderSource(n)),s=`${function(t,e="",n=0){const r=[...e.matchAll(ia)],o=new Map(r.map(((t,n)=>{const o=parseInt(t[1]),a=r[n+1],i=a?a.index:e.length;return[o-1,e.substring(t.index,i)]})));return t.split("\n").map(((t,e)=>{const r=o.get(e);return`${e+1+n}: ${t}${r?`\n\n^^^ ${r}`:""}`})).join("\n")}(i,o,a)}\nError compiling ${Me(t,e)}: ${o}`;return r(s),s}return""}(t,t.getShaderParameter(e,t.SHADER_TYPE),e,n))).filter((t=>t)).join("\n")}`}}function Ma(t,e,n,r,o){const a=la(n,r,o),i=[];for(const t of e){const e=Mo(t);if(!e)return ca(a,`unknown script element: ${t}`);i.push(e.text)}return ma(t,i,a)}function ga(t,e,n,r,o){return ma(t,e,n,r,o)}function wa(t){const e=t.name;return e.startsWith("gl_")||e.startsWith("webgl_")}const Pa=/(\.|\[|]|\w+)/g,Aa=t=>t>="0"&&t<="9";function Fa(t,e,n,r){const o=t.split(Pa).filter((t=>""!==t));let a=0,i="";for(;;){const t=o[a++];i+=t;const s=Aa(t[0]),u=s?parseInt(t):t;if(s&&(i+=o[a++]),a===o.length){n[u]=e;break}{const t=o[a++],e="["===t,s=n[u]||(e?[]:{});n[u]=s,n=s,r[i]=r[i]||function(t){return function(e){La(t,e)}}(s),i+=t}}}function _a(t,e){let n=0;function r(e,r,o){const a=r.name.endsWith("[0]"),i=r.type,s=$o[i];if(!s)throw new Error(`unknown type: 0x${i.toString(16)}`);let u;if(s.bindPoint){const e=n;n+=r.size,u=a?s.arraySetter(t,i,e,o,r.size):s.setter(t,i,e,o,r.size)}else u=s.arraySetter&&a?s.arraySetter(t,o):s.setter(t,o);return u.location=o,u}const o={},a={},i=t.getProgramParameter(e,Bo);for(let n=0;n<i;++n){const i=t.getActiveUniform(e,n);if(wa(i))continue;let s=i.name;s.endsWith("[0]")&&(s=s.substr(0,s.length-3));const u=t.getUniformLocation(e,i.name);if(u){const t=r(0,i,u);o[s]=t,Fa(s,t,a,o)}}return o}function Ea(t,e){const n={},r=t.getProgramParameter(e,Ro);for(let o=0;o<r;++o){const r=t.getTransformFeedbackVarying(e,o);n[r.name]={index:o,type:r.type,size:r.size}}return n}function Ta(t,e,n){e.transformFeedbackInfo&&(e=e.transformFeedbackInfo),n.attribs&&(n=n.attribs);for(const r in n){const o=e[r];if(o){const e=n[r];e.offset?t.bindBufferRange(_o,o.index,e.buffer,e.offset,e.size):t.bindBufferBase(_o,o.index,e.buffer)}}}function za(t,e,n){const r=t.createTransformFeedback();return t.bindTransformFeedback(Eo,r),t.useProgram(e.program),Ta(t,e,n),t.bindTransformFeedback(Eo,null),r}function Sa(t,e){const n=t.getProgramParameter(e,Bo),r=[],o=[];for(let a=0;a<n;++a){o.push(a),r.push({});const n=t.getActiveUniform(e,a);r[a].name=n.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach((function(n){const a=n[0],i=n[1];t.getActiveUniforms(e,o,t[a]).forEach((function(t,e){r[e][i]=t}))}));const a={},i=t.getProgramParameter(e,Do);for(let n=0;n<i;++n){const r=t.getActiveUniformBlockName(e,n),o={index:t.getUniformBlockIndex(e,r),usedByVertexShader:t.getActiveUniformBlockParameter(e,n,ko),usedByFragmentShader:t.getActiveUniformBlockParameter(e,n,Lo),size:t.getActiveUniformBlockParameter(e,n,jo),uniformIndices:t.getActiveUniformBlockParameter(e,n,Uo)};o.used=o.usedByVertexShader||o.usedByFragmentShader,a[r]=o}return{blockSpecs:a,uniformData:r}}const Ia=/\[\d+\]\.$/,Ca=(t,e)=>((t+(e-1))/e|0)*e;function Ba(t,e,n,r){const o=n.blockSpecs,a=n.uniformData,i=o[r];if(!i)return vo("no uniform block object named:",r),{name:r,uniforms:{}};const s=new ArrayBuffer(i.size),u=t.createBuffer(),c=i.index;t.bindBuffer(Fo,u),t.uniformBlockBinding(e,i.index,c);let l=r+".";Ia.test(l)&&(l=l.replace(Ia,"."));const f={},h={},d={};return i.uniformIndices.forEach((function(t){const e=a[t];let n=e.name;n.startsWith(l)&&(n=n.substr(l.length));const r=n.endsWith("[0]");r&&(n=n.substr(0,n.length-3));const o=$o[e.type],i=o.Type,u=r?Ca(o.size,16)*e.size:o.size*e.size,c=new i(s,e.offset,u/i.BYTES_PER_ELEMENT);f[n]=c;const m=function(t,e,n,r){if(e||n){r=r||1;const e=t.length/4;return function(n){let o=0,a=0;for(let i=0;i<e;++i){for(let e=0;e<r;++e)t[o++]=n[a++];o+=4-r}}}return function(e){e.length?t.set(e):t[0]=e}}(c,r,o.rows,o.cols);h[n]=m,Fa(n,m,d,h)})),{name:r,array:s,asFloat:new Float32Array(s),buffer:u,uniforms:f,setters:h}}function Oa(t,e,n){return Ba(t,e.program,e.uniformBlockSpec,n)}function Ra(t,e,n){const r=(e.uniformBlockSpec||e).blockSpecs[n.name];if(r){const e=r.index;return t.bindBufferRange(Fo,e,n.buffer,n.offset||0,n.array.byteLength),!0}return!1}function Da(t,e,n){Ra(t,e,n)&&t.bufferData(Fo,n.array,wo)}function ka(t,e){const n=t.setters;for(const t in e){const r=n[t];r&&r(e[t])}}function La(t,e){for(const n in e){const r=t[n];"function"==typeof r?r(e[n]):La(t[n],e[n])}}function ja(t,...e){const n=t.uniformSetters||t,r=e.length;for(let t=0;t<r;++t){const r=e[t];if(Array.isArray(r)){const t=r.length;for(let e=0;e<t;++e)ja(n,r[e])}else for(const t in r){const e=n[t];e&&e(r[t])}}}const Ua=ja;function Va(t,e){const n={},r=t.getProgramParameter(e,Oo);for(let o=0;o<r;++o){const r=t.getActiveAttrib(e,o);if(wa(r))continue;const a=t.getAttribLocation(e,r.name),i=aa[r.type],s=i.setter(t,a,i);s.location=a,n[r.name]=s}return n}function qa(t,e){for(const n in e){const r=t[n];r&&r(e[n])}}function Na(t,e,n){n.vertexArrayObject?t.bindVertexArray(n.vertexArrayObject):(qa(e.attribSetters||e,n.attribs),n.indices&&t.bindBuffer(Ao,n.indices))}function Wa(t,e){const n={program:e,uniformSetters:_a(t,e),attribSetters:Va(t,e)};return xe(t)&&(n.uniformBlockSpec=Sa(t,e),n.transformFeedbackInfo=Ea(t,e)),n}const Ga=/\s|{|}|;/;function $a(t,e,n,r,o){const a=la(n,r,o),i=[];if(e=e.map((function(t){if(!Ga.test(t)){const e=Mo(t);if(e)t=e.text;else{const e=`no element with id: ${t}`;a.errorCallback(e),i.push(e)}}return t})),i.length)return ca(a,"");const s=a.callback;s&&(a.callback=(e,n)=>{s(e,e?void 0:Wa(t,n))});const u=ga(t,e,a);return u?Wa(t,u):null}function Xa(t,e,n,r,o){for(const[a,i]of Object.entries(e)){const s={...o},u=n[a];Array.isArray(u)||Object.assign(s,u);const c=va(t,i,s.errorCallback);if(c){for(const n of Object.values(e)){const e=t.getAttachedShaders(n);t.deleteProgram(n);for(const n of e)r.has(n)||t.deleteShader(n)}return c}}}function Ya(t,e,n={}){const r=new Set,o=Object.fromEntries(Object.entries(e).map((([e,o])=>{const a={...n},i=Array.isArray(o)?o:o.shaders;return Array.isArray(o)||Object.assign(a,o),i.forEach(r.add,r),[e,da(t,i,a)]})));if(!n.callback)return Xa(t,o,e,r,n)?void 0:o;(async function(t,e){for(const n of Object.values(e))await xa(t,n)})(t,o).then((()=>{const a=Xa(t,o,e,r,n);n.callback(a,a?void 0:o)}))}function Ha(t,e,n){function r(t,e){return Object.fromEntries(Object.entries(e).map((([e,n])=>[e,Wa(t,n)])))}const o=(n=la(n)).callback;o&&(n.callback=(e,n)=>{o(e,e?void 0:r(t,n))});const a=Ya(t,e,n);if(!o&&a)return r(t,a)}const Qa=pa(Ya),Za=pa(Ha);var Ka=Object.freeze({__proto__:null,createAttributeSetters:Va,createProgram:ma,createProgramAsync:ba,createPrograms:Ya,createProgramsAsync:Qa,createProgramFromScripts:Ma,createProgramFromSources:ga,createProgramInfo:$a,createProgramInfoAsync:ya,createProgramInfos:Ha,createProgramInfosAsync:Za,createProgramInfoFromProgram:Wa,createUniformSetters:_a,createUniformBlockSpecFromProgram:Sa,createUniformBlockInfoFromProgram:Ba,createUniformBlockInfo:Oa,createTransformFeedback:za,createTransformFeedbackInfo:Ea,bindTransformFeedbackInfo:Ta,setAttributes:qa,setBuffersAndAttributes:Na,setUniforms:ja,setUniformsAndBindTextures:Ua,setUniformBlock:Da,setBlockUniforms:ka,bindUniformBlock:Ra});const Ja=4,ti=5123;function ei(t,e,n,r,o,a){n=void 0===n?Ja:n;const i=e.indices,s=e.elementType,u=void 0===r?e.numElements:r;o=void 0===o?0:o,s||i?void 0!==a?t.drawElementsInstanced(n,u,void 0===s?ti:e.elementType,o,a):t.drawElements(n,u,void 0===s?ti:e.elementType,o):void 0!==a?t.drawArraysInstanced(n,o,u,a):t.drawArrays(n,o,u)}function ni(t,e){let n=null,r=null;e.forEach((function(e){if(!1===e.active)return;const o=e.programInfo,a=e.vertexArrayInfo||e.bufferInfo;let i=!1;const s=void 0===e.type?Ja:e.type;o!==n&&(n=o,t.useProgram(o.program),i=!0),(i||a!==r)&&(r&&r.vertexArrayObject&&!a.vertexArrayObject&&t.bindVertexArray(null),r=a,Na(t,o,a)),ja(o,e.uniforms),ei(t,a,s,e.count,e.offset,e.instanceCount)})),r&&r.vertexArrayObject&&t.bindVertexArray(null)}var ri=Object.freeze({__proto__:null,drawBufferInfo:ei,drawObjectList:ni});const oi=36160,ai=36161,ii=3553,si=36064,ui=36096,ci=33306,li=33071,fi=9729,hi=[{format:6408,type:5121,min:fi,wrap:li},{format:34041}],di={};di[34041]=ci,di[6401]=36128,di[36168]=36128,di[6402]=ui,di[33189]=ui,di[33190]=ui,di[36012]=ui,di[35056]=ci,di[36013]=ci;const mi={32854:!0,32855:!0,36194:!0,34041:!0,33189:!0,6401:!0,36168:!0},pi=32;function bi(t,e,n,r){const o=oi,a=t.createFramebuffer();t.bindFramebuffer(o,a),n=n||t.drawingBufferWidth,r=r||t.drawingBufferHeight;const i=[],s={framebuffer:a,attachments:[],width:n,height:r};return(e=e||hi).forEach((function(e,a){let u=e.attachment;const c=e.samples,l=e.format;let f=e.attachmentPoint||function(t,e){return di[t]||di[e]}(l,e.internalFormat);if(f||(f=si+a),function(t){return t>=si&&t<si+pi}(f)&&i.push(f),!u)if(void 0!==c||function(t){return mi[t]}(l))u=t.createRenderbuffer(),t.bindRenderbuffer(ai,u),c>1?t.renderbufferStorageMultisample(ai,c,l,n,r):t.renderbufferStorage(ai,l,n,r);else{const o=Object.assign({},e);o.width=n,o.height=r,void 0===o.auto&&(o.auto=!1,o.min=o.min||o.minMag||fi,o.mag=o.mag||o.minMag||fi,o.wrapS=o.wrapS||o.wrap||li,o.wrapT=o.wrapT||o.wrap||li),u=mo(t,o)}if(j(0,u))t.framebufferRenderbuffer(o,f,ai,u);else{if(!U(0,u))throw new Error("unknown attachment type");void 0!==e.layer?t.framebufferTextureLayer(o,f,u,e.level||0,e.layer):t.framebufferTexture2D(o,f,e.target||ii,u,e.level||0)}s.attachments.push(u)})),t.drawBuffers&&t.drawBuffers(i),s}function yi(t,e,n,r,o){r=r||t.drawingBufferWidth,o=o||t.drawingBufferHeight,e.width=r,e.height=o,(n=n||hi).forEach((function(n,a){const i=e.attachments[a],s=n.format,u=n.samples;if(void 0!==u||j(0,i))t.bindRenderbuffer(ai,i),u>1?t.renderbufferStorageMultisample(ai,u,s,r,o):t.renderbufferStorage(ai,s,r,o);else{if(!U(0,i))throw new Error("unknown attachment type");po(t,i,n,r,o)}}))}function xi(t,e,n){n=n||oi,e?(t.bindFramebuffer(n,e.framebuffer),t.viewport(0,0,e.width,e.height)):(t.bindFramebuffer(n,null),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight))}var vi=Object.freeze({__proto__:null,bindFramebufferInfo:xi,createFramebufferInfo:bi,resizeFramebufferInfo:yi});const Mi=34963;function gi(t,e,n){const r=t.createVertexArray();return t.bindVertexArray(r),e.length||(e=[e]),e.forEach((function(e){Na(t,e,n)})),t.bindVertexArray(null),{numElements:n.numElements,elementType:n.elementType,vertexArrayObject:r}}function wi(t,e,n,r){const o=t.createVertexArray();return t.bindVertexArray(o),qa(e,n),r&&t.bindBuffer(Mi,r),t.bindVertexArray(null),o}function Pi(t,e,n){return wi(t,e.attribSetters||e,n.attribs,n.indices)}var Ai=Object.freeze({__proto__:null,createVertexArrayInfo:gi,createVAOAndSetAttributes:wi,createVAOFromBufferInfo:Pi});const Fi={addExtensionsToContext:!0};function _i(t){O(t,Fi),tt(t),Xr(t)}const Ei=/^(.*?)_/;function Ti(t,e){Me(t,0);const n=t.getExtension(e);if(n){const r={},o=Ei.exec(e)[1],a="_"+o;for(const e in n){const i=n[e],s="function"==typeof i,u=s?o:a;let c=e;e.endsWith(u)&&(c=e.substring(0,e.length-u.length)),void 0!==t[c]?s||t[c]===i||D(c,t[c],i,e):s?t[c]=function(t){return function(){return t.apply(n,arguments)}}(i):(t[c]=i,r[c]=i)}r.constructor={name:n.constructor.name},Me(r,0)}return n}const zi=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function Si(t){for(let e=0;e<zi.length;++e)Ti(t,zi[e])}function Ii(t,e){const n=function(t,e){const n=["webgl","experimental-webgl"];let r=null;for(let o=0;o<n.length;++o)if(r=t.getContext(n[o],e),r){Fi.addExtensionsToContext&&Si(r);break}return r}(t,e);return n}function Ci(t,e){const n=function(t,e){const n=["webgl2","webgl","experimental-webgl"];let r=null;for(let o=0;o<n.length;++o)if(r=t.getContext(n[o],e),r){Fi.addExtensionsToContext&&Si(r);break}return r}(t,e);return n}function Bi(t,e){e=e||1,e=Math.max(0,e);const n=t.clientWidth*e|0,r=t.clientHeight*e|0;return(t.width!==n||t.height!==r)&&(t.width=n,t.height=r,!0)}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={exports:{}};return t[r].call(a.exports,a,a.exports,n),a.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(587)})();